{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"index.html","text":"\u6b22\u8fce\u8bbf\u95ee\u5408\u4fe1HMI\u7684\u4e3b\u6587\u6863\uff01 Welcome to Co-Trust HMI documentation! \u5feb\u901f\u94fe\u63a5: \ud83e\udd42\u5b98\u65b9\u7f51\u7ad9 \u5408\u4fe1HMI\u4ea7\u54c1\u79cd\u7c7b\u4e30\u5bcc\uff0c\u6db5\u76d6\u4e86\u6587\u672c\u663e\u793a\u7ec8\u7aef\u3001\u89e6\u6478\u5c4f\u3001\u6309\u952e\u5c4f\u3001\u591a\u529f\u80fd\u5c4f\uff08\u89e6\u6478+\u6309\u952e\uff09\uff0c\u6ee1\u8db3\u4e0d\u540c\u81ea\u52a8\u5316\u63a7\u5236\u7684\u9700\u6c42\uff0c\u4e3a\u5ba2\u6237\u63d0\u4f9b\u5404\u79cd\u7075\u6d3b\u53ef\u9760\u7684\u89e3\u51b3\u65b9\u6848\u3002 \ud83d\udcd6\u4e3b\u6587\u6863: \u4ecb\u7ecd \u786c\u4ef6\u76f8\u5173\u77e5\u8bc6 \u642d\u5efa\u5f00\u53d1\u73af\u5883 U-Boot Linux Kernel Rootfs Application \u9644\u5f55","title":"\u4e3b\u9875"},{"location":"index.html#hmi","text":"Welcome to Co-Trust HMI documentation! \u5feb\u901f\u94fe\u63a5: \ud83e\udd42\u5b98\u65b9\u7f51\u7ad9 \u5408\u4fe1HMI\u4ea7\u54c1\u79cd\u7c7b\u4e30\u5bcc\uff0c\u6db5\u76d6\u4e86\u6587\u672c\u663e\u793a\u7ec8\u7aef\u3001\u89e6\u6478\u5c4f\u3001\u6309\u952e\u5c4f\u3001\u591a\u529f\u80fd\u5c4f\uff08\u89e6\u6478+\u6309\u952e\uff09\uff0c\u6ee1\u8db3\u4e0d\u540c\u81ea\u52a8\u5316\u63a7\u5236\u7684\u9700\u6c42\uff0c\u4e3a\u5ba2\u6237\u63d0\u4f9b\u5404\u79cd\u7075\u6d3b\u53ef\u9760\u7684\u89e3\u51b3\u65b9\u6848\u3002 \ud83d\udcd6\u4e3b\u6587\u6863: \u4ecb\u7ecd \u786c\u4ef6\u76f8\u5173\u77e5\u8bc6 \u642d\u5efa\u5f00\u53d1\u73af\u5883 U-Boot Linux Kernel Rootfs Application \u9644\u5f55","title":"\u6b22\u8fce\u8bbf\u95ee\u5408\u4fe1HMI\u7684\u4e3b\u6587\u6863\uff01"},{"location":"chap1.html","text":"1 \u4ecb\u7ecd \u5408\u4fe1HMI\u65b0\u5e73\u53f0\u786c\u4ef6\u65b9\u9762\u91c7\u7528\u5168\u5fd7A40i\u4f5c\u4e3a\u4e3b\u63a7\u82af\u7247\uff0c\u8f6f\u4ef6\u91c7\u7528Buildroot\u4f5c\u4e3aHMI\u56fa\u4ef6\u7684\u5f00\u53d1\u73af\u5883 1.1 \u82af\u7247\u4ecb\u7ecd \u5168\u5fd7\u5de5\u4e1a\u7ea7A40I (A40i/R40/V40/T3) \u56db\u6838Cortex-A7\uff0c\u4e3b\u9891\u6700\u9ad8\u4e3a1.2GHz\uff0c\u96c6\u6210 Mali400MP2 GPU\uff1b \u652f\u6301\u53cc\u5c4f\u540c\u663e\u5f02\u663e\u548c\u591a\u79cd\u663e\u793a\u63a5\u53e3RGB/MIPI /\u53cc8\u4f4d LVDS /HDMI/TV OUT\uff0c1920x1080@60fps\uff1b \u652f\u63011\u8def\u5343\u5146\u7f51\u7edc\uff0c1\u8def\u767e\u5146\u7f51\u7edc\uff0c\u652f\u6301WIFI/BT4.0\uff0c\u652f\u63014G\uff1b \u652f\u6301\u591a\u8def\u6444\u50cf\u5934\u8f93\u5165\uff0c\u4e24\u8defDVP\u6444\u50cf\u5934\u63a5\u53e3\uff0c\u6700\u9ad8\u652f\u6301500W\u50cf\u7d20\uff0c\u56db\u8defTVIN\uff0c\u652f\u6301NTSC\u4e0e PAL\u5236\u5f0f CPU\u5185\u90e8\u96c6\u6210Audio Codec\uff0c\u652f\u63011\u8def\u5dee\u5206PHONEOUT\uff0c1\u8def\u7acb\u4f53\u58f0\u8033\u673a\u8f93\u51fa ,1\u8defmicrophone\u8f93\u5165 \u5916\u90e8\u6269\u5c55\u63a5\u53e3\u4e30\u5bccUART 8\u3001SD 4\u3001USB 3\u3001SPI 4\u3001IIC 5\u3001SATA\u3001PWM 8\u7b49\uff1b \u652f\u6301Linux\u548cAndroid\u64cd\u4f5c\u7cfb\u7edf\uff1b \u529f\u80fd \u63cf\u8ff0 CPU ARM Cortex-A7 Quad-Core 32 KB (Instruction) / 32 KiB (Data) L1-Cache per core 512 KB L2-Cache (shared between four cores) GPU ARM Mali400 MP2Featuring 1 vertex shader (GP) and 2 fragment shaders (PP) Complies with OpenGL ES 2.0 Memory DDR2/DDR3/DDR3L/LPDDR2/LPDDR3 controller up to 2GB address space NAND Flash controller and 64-bit ECC Video Full HD 1080p video decoding of MPEG-2, MPEG-4 SP/ASP GMC, H.263, H.264, WMV9/VC-1, and VP8 BD Directory, BD ISO and BD m2ts video decoding H.264 High Profile 1080p @ 45 fps encoding Complies with RTSP, HTTP,HLS,RTMP,MMS streaming media protocol Camera 4-channel TVIN Dual-sensor support Audio Integrated HI-FI 100 dB Audio Codec Dual MIC noise cancellation Display Supports output size up to 2048x2048 CPU/RGB/LVDS LCD interface 1920x1080@60fps MIPI 4 lane DSI interface up to 1920x1080@60fps resolution TV out: 4-ch CVBS, 1-ch YPbPr and 1-ch VGA HDMI v1.4 with HDCP 1.2, up to 1920x1080@60fps Connectivity 3 X USB 2.0 , 5 x TWI, 4 x SPI, 8 x UART RTP PS2 SDIO, IR, PMIC AXP221s OS Melis, Linux OS Package FBGA 468 balls,0.65mm ball pitch, 16x16 mm Process 40nm \u53c2\u8003\u94fe\u63a5 \u5168\u5fd7\u5b98\u7f51A40i\u4ea7\u54c1\u4ecb\u7ecd Allwinner A40i Datasheet Allwinner A40i User Manual 1.2 Buildroot\u5f00\u53d1\u73af\u5883 1.2.1 Buildroot \u7b80\u4ecb Buildroot \u662f\u4e00\u4e2a\u7b80\u5355\u9ad8\u6548\u3001\u6613\u4e8e\u4f7f\u7528\u7684\u53ef\u901a\u8fc7\u4ea4\u53c9\u7f16\u8bd1\u6765\u6784\u5efa\u5d4c\u5165\u5f0f Linux \u7cfb\u7edf\u7684\u5de5\u5177\u3002 \u5b83\u80fd\u591f\u5904\u7406\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u3001\u6839\u6587\u4ef6\u7cfb\u7edf\u751f\u6210\u3001\u5185\u6838\u955c\u50cf\u7f16\u8bd1\u548c\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u7f16\u8bd1\u7b49\uff0c\u8fd8\u652f\u6301\u6570\u5343\u79cd\u8f6f\u4ef6\u5305\uff0c\u4f8b\u5982 Gtk3\u3001QT5\u3001GStreamer\u3001Webkit \u4ee5\u53ca\u5927\u91cf\u4e0e\u7f51\u7edc\u76f8\u5173\u3001\u7cfb\u7edf\u76f8\u5173\u7684\u5b9e\u7528\u5de5\u5177\u3002Buildroot \u91c7\u7528\u7c7b\u4f3c\u4e8e linux \u5185\u6838\u7684 menuconfig\u3001gconfig \u548c xconfig \u914d\u7f6e\u754c\u9762\uff0c\u56e0\u6b64\u4f7f\u7528 Buildroot \u6784\u5efa\u4e00\u4e2a\u57fa\u672c\u7684\u7cfb\u7edf\u662f\u975e\u5e38\u8f7b\u677e\u7684\uff0c\u8fd9\u901a\u5e38\u4f1a\u82b1\u8d39 15-30 \u5206\u949f\u3002\u540c\u65f6\uff0cBuildroot \u662f\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5bf9\u5b83\u505a\u51fa\u8d21\u732e\uff0c\u6765\u8ba9 Buildroot \u53d8\u5f97\u66f4\u52a0\u5b8c\u5584\u3002 buildroot \u5b98\u65b9\u7f51\u7ad9 buildroot \u4e3b\u754c\u9762 1.2.2 Buildroot \u4f7f\u7528\u7b80\u4ecb 1.2.2.1 Buildroot\u76ee\u5f55\u7ed3\u6784 \u251c\u2500\u2500 arch //\u5b58\u653eCPU\u67b6\u6784\u76f8\u5173\u7684\u914d\u7f6e\u811a\u672c\uff0c\u4f8b\u5982ARM\uff0cX86\uff0cMIPS\u7b49 \u251c\u2500\u2500 board //\u5b58\u653e\u5f00\u53d1\u677f\u7684\u677f\u7ea7\u914d\u7f6e\u53c2\u6570 \u251c\u2500\u2500 boot //\u5b58\u653eBootloader\u7684\u81ea\u52a8\u6784\u5efa\u811a\u672c \u251c\u2500\u2500 CHANGES \u251c\u2500\u2500 Config.in \u251c\u2500\u2500 Config.in.legacy \u251c\u2500\u2500 configs \u251c\u2500\u2500 COPYING \u251c\u2500\u2500 DEVELOPERS \u251c\u2500\u2500 dl //\u5b58\u653e\u4e0b\u8f7d\u7684\u6e90\u4ee3\u7801\u4ee5\u53ca\u5e94\u7528\u8f6f\u4ef6\u7684\u538b\u7f29\u5305 \u251c\u2500\u2500 docs //\u5b58\u653e\u76f8\u5173\u7684\u53c2\u8003\u6587\u6863 \u251c\u2500\u2500 fs //\u5b58\u653e\u751f\u6210\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf\u7684\u5efa\u6784\u811a\u672c \u251c\u2500\u2500 linux //\u5b58\u653eLinux Kernel\u7684\u81ea\u52a8\u6784\u5efa\u811a\u672c \u251c\u2500\u2500 Makefile \u251c\u2500\u2500 Makefile.legacy \u251c\u2500\u2500 output //\u5b58\u653e\u7f16\u8bd1\u751f\u6210\u8f93\u51fa\u7684\u6587\u4ef6 \u251c\u2500\u2500 build //\u5b58\u653e\u6e90\u4ee3\u7801\u89e3\u538b\u7f16\u8bd1\u5b8c\u6210\u540e\u7684\u73b0\u573a \u251c\u2500\u2500 host //\u5b58\u653e\u5236\u4f5c\u597d\u7684\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u4f8b\u5982GCC\uff0c\u4ea4\u53c9\u7f16\u8bd1\u94fe\u5de5\u5177\u7b49 \u251c\u2500\u2500 images //\u5b58\u653eBuildroot\u7f16\u8bd1\u6700\u7ec8\u751f\u6210\u751f\u6210\u7684Bootloader,zImage,rootfs \u7b49\u955c\u50cf\u6587\u4ef6 \u251c\u2500\u2500 staging \u2514\u2500\u2500 target //\u7528\u6765\u5b58\u653e\u5efa\u6784\u6839\u6587\u4ef6\u7684\u57fa\u672c\u76ee\u5f55\u7ed3\u6784\uff0c\u653e\u7f6e\u4ea4\u53c9\u7f16\u8bd1\u751f\u6210\u7684ELF\u53ef\u6267\u884c\u6587\u4ef6\u548cso\u52a8\u6001\u5e93 \u251c\u2500\u2500 package //\u5b58\u653e\u7b2c\u4e09\u65b9\u5f00\u5143\u5305\u7684\u81ea\u52a8\u7f16\u8bd1\u6784\u5efa\u811a\u672c \u251c\u2500\u2500 README \u251c\u2500\u2500 support \u251c\u2500\u2500 system //\u5b58\u653e\u6587\u4ef6\u7cfb\u7edf\u76ee\u5f55\u548c\u8bbe\u5907\u8282\u70b9\u7684\u6a21\u677f \u251c\u2500\u2500 toolchain //\u5b58\u653e\u5236\u4f5c\u5de5\u5177\u94fe\u7684\u811a\u672c \u2514\u2500\u2500 utils 1.2.2.2 \u5173\u4e8e\u5de5\u5177\u94fe \u7f16\u8bd1\u5de5\u5177\u94fe\u662f\u4e00\u7ec4\u5141\u8bb8\u60a8\u4e3a\u76ee\u6807\u7cfb\u7edf\u7f16\u8bd1\u4ee3\u7801\u7684\u5de5\u5177\u3002\u5b83\u7531\u4e00\u4e2a\u7f16\u8bd1\u5668(\u5728\u6211\u4eec\u73af\u5883\u4e0b\u4e3a gcc)\u3001\u4e8c\u8fdb\u5236\u5de5\u5177(\u6bd4\u5982\u6c47\u7f16\u5668\u548c\u94fe\u63a5\u5668\uff0c\u5728\u6211\u4eec\u73af\u5883\u4e0b\u4e3a binutils)\u4ee5\u53ca\u4e00\u4e2a C \u6807\u51c6\u5e93(\u5982 G NU Libc\u3001uClibc-ng)\u7ec4\u6210\u3002 \u5b89\u88c5\u5728\u5f00\u53d1\u5de5\u4f5c\u7ad9\u4e0a\u7684\u7cfb\u7edf\u80af\u5b9a\u5df2\u6709\u4e00\u4e2a\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u53ef\u7528\u5b83\u6765\u7f16\u8bd1\u5728\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u5982\u679c\u4f7f\u7528\u7684\u662f PC\uff0c\u5219\u8be5\u7f16\u8bd1\u5de5\u5177\u94fe\u53ef\u5728 x86 \u5904\u7406\u5668\u4e0a\u8fd0\u884c\uff0c\u5e76\u4e3a x86 \u5904\u7406\u5668\u751f\u6210\u4ee3\u7801\u3002 \u5728\u5927\u591a\u6570Linux\u7cfb\u7edf\u4e2d\uff0c\u7f16\u8bd1\u5de5\u5177\u94fe\u4f7f\u7528GNU libc(glibc)\u4f5c\u4e3aC\u6807\u51c6\u5e93\u3002\u8fd9\u79cd\u7f16\u8bd1\u5de5\u5177\u94fe\u79f0 \u4e3a\u201c\u5bbf\u4e3b\u673a\u7f16\u8bd1\u5de5\u5177\u94fe\u201d\u3002\u5de5\u5177\u94fe\u5728\u4e0a\u9762\u8fd0\u884c\u5e76\u4e14\u60a8\u5728\u5176\u4e0a\u5de5\u4f5c\u7684\u8ba1\u7b97\u673a\u79f0\u4e3a\u201c\u5bbf\u4e3b\u673a\u7cfb\u7edf\u201d \u3002 \u7f16\u8bd1\u5de5\u5177\u94fe\u7531\u60a8\u7684\u53d1\u884c\u7248\u63d0\u4f9b\uff0c\u800c Buildroot \u4e0e\u5b83\u65e0\u5173(\u9664\u4e86\u4f7f\u7528\u5b83\u6765\u6784\u5efa\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u548c\u5728\u5f00\u53d1\u4e3b\u673a\u4e0a\u8fd0\u884c\u7684\u5176\u4ed6\u5de5\u5177)\u3002 \u5982\u4e0a\u6240\u8ff0\uff0c\u7cfb\u7edf\u968f\u9644\u7684\u7f16\u8bd1\u5de5\u5177\u94fe\u53ef\u5728\u5bbf\u4e3b\u673a\u4e0a\u8fd0\u884c\u5e76\u4e3a\u5bbf\u4e3b\u673a\u7cfb\u7edf\u4e2d\u7684\u5904\u7406\u5668\u751f\u6210\u4ee3\u7801\u3002 \u7531\u4e8e\u5d4c\u5165\u5f0f\u7cfb\u7edf\u5177\u6709\u4e0d\u540c\u7684\u5904\u7406\u5668\uff0c\u56e0\u6b64\u9700\u8981\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe-\u4e00\u79cd\u80fd\u5728\u4e3b\u673a\u7cfb\u7edf\u4e0a \u8fd0\u884c\u4f46\u4e3a\u76ee\u6807\u7cfb\u7edf(\u548c\u76ee\u6807\u5904\u7406\u5668)\u751f\u6210\u4ee3\u7801\u7684\u7f16\u8bd1\u5de5\u5177\u94fe\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e3b\u673a\u7cfb\u7edf\u4f7f\u7528x86\uff0c\u800c\u76ee\u6807\u7cfb\u7edf\u4f7f\u7528 ARM\uff0c\u5219\u4e3b\u673a\u4e0a\u7684\u5e38\u89c4\u7f16\u8bd1\u5de5\u5177\u94fe\u662f\u5728 x86 \u4e0a\u8fd0\u884c\u5e76\u4e3a x86 \u751f\u6210\u4ee3\u7801\uff0c\u800c \u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u662f\u5728 x86 \u4e0a\u8fd0\u884c\u5e76\u4e3a ARM \u751f\u6210\u4ee3\u7801\u3002 Buildroot \u4e3a\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u63d0\u4f9b\u4e24\u79cd\u89e3\u51b3\u65b9\u6848: \u5185\u90e8\u5de5\u5177\u94fe\u540e\u7aef\uff0c\u5728\u914d\u7f6e\u754c\u9762\u4e2d\u8c03\u7528\u201cBuildroot toolchain\u201d\u3002 \u5916\u90e8\u5de5\u5177\u94fe\u540e\u7aef\uff0c\u5728\u914d\u7f6e\u754c\u9762\u4e2d\u8c03\u7528\u201cExternal toolchain\u201d\u3002 \u672c\u6b21\u9009\u62e9External toolchain 1.2.2.3 \u5e38\u7528\u547d\u4ee4 \u547d\u4ee4 \u63cf\u8ff0 make menuconfig \u6253\u5f00\u4ea4\u4e92\u5f0f\u914d\u7f6e\u83dc\u5355 make \u57fa\u4e8e\u5f53\u524d\u914d\u7f6e\u6784\u5efa\u7cfb\u7edf\uff0c\u5305\u62ec\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u3001\u5185\u6838\u3001\u6587\u4ef6\u7cfb\u7edf\u3001\u8bbe\u5907\u6811\u7b49 make clean \u6e05\u9664\u6784\u5efa\u8fc7\u7a0b\u4e2d\u751f\u6210\u7684\u6240\u6709\u4e34\u65f6\u6587\u4ef6\uff0c\u4f46\u4fdd\u7559\u914d\u7f6e\u6587\u4ef6 make distclean \u6e05\u9664\u6784\u5efa\u8fc7\u7a0b\u4e2d\u751f\u6210\u7684\u6240\u6709\u4e34\u65f6\u6587\u4ef6\u53ca\u751f\u6210\u7684\u914d\u7f6e\u6587\u4ef6 make savedefconfig \u5c06\u5f53\u524d\u914d\u7f6e\u4fdd\u5b58\u4e3a\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u4e8e\u540e\u7eed\u4f7f\u7528 make xxx_defconfig \u9009\u62e9\u7279\u5b9a\u677f\u5b50\u7684\u9ed8\u8ba4\u914d\u7f6e make linux-menuconfig \u6253\u5f00\u5185\u6838\u4ea4\u4e92\u5f0f\u914d\u7f6e\u83dc\u5355\uff0c\u5141\u8bb8\u7528\u6237\u9009\u62e9\u5185\u6838\u7f16\u8bd1\u9009\u9879\u3001\u9a71\u52a8\u7a0b\u5e8f\u7b49 make linux-clean \u6e05\u9664\u5185\u6838\u6784\u5efa\u671f\u95f4\u751f\u6210\u7684\u4e34\u65f6\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6 make linux-dirclean \u6e05\u9664\u5185\u6838\u751f\u6210\u7684\u6240\u6709\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6 make busybox-menuconfig \u6253\u5f00 Busybox \u4ea4\u4e92\u5f0f\u914d\u7f6e\u83dc\u5355\uff0c\u5141\u8bb8\u7528\u6237\u9009\u62e9 Busybox \u5305\u542b\u7684\u5de5\u5177\u3001\u9009\u9879\u7b49 make busybox-clean \u6e05\u9664 Busybox \u6784\u5efa\u8fc7\u7a0b\u4e2d\u751f\u6210\u7684\u4e34\u65f6\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6 make busybox-dirclean \u6e05\u9664 Busybox \u751f\u6210\u7684\u6240\u6709\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6 make sdk \u521b\u5efa SDK \u5de5\u5177\u5305\uff0c\u5176\u4e2d\u5305\u542b\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u548c rootfs \u6587\u4ef6\u7cfb\u7edf\u7b49\uff0c\u53ef\u7528\u4e8e\u5c06\u5e94\u7528\u7a0b\u5e8f\u4ea4\u4ed8\u7ed9\u5176\u4ed6\u5f00\u53d1\u4eba\u5458\u6216\u5ba2\u6237 make\u547d\u4ee4\u901a\u5e38\u5c06\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a \u4e0b\u8f7d\u6e90\u6587\u4ef6\uff08\u6839\u636e\u9700\u8981\uff09\uff1b \u914d\u7f6e\u3001\u6784\u5efa\u548c\u5b89\u88c5\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u6216\u4ec5\u5bfc\u5165\u5916\u90e8\u5de5\u5177\u94fe \u914d\u7f6e\u3001\u6784\u5efa\u548c\u5b89\u88c5\u9009\u5b9a\u7684\u76ee\u6807\u8f6f\u4ef6\u5305\uff1b \u6784\u5efa\u5185\u6838\u6620\u50cf\uff08\u5982\u679c\u914d\u7f6e\u4e86\u8be5\u9009\u9879\uff09 \u6784\u5efa\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u6620\u50cf\uff08\u5982\u679c\u914d\u7f6e\u4e86\u8be5\u9009\u9879\uff09 \u4ee5\u9009\u5b9a\u7684\u683c\u5f0f\u521b\u5efa\u4e00\u4e2a\u6839\u6587\u4ef6\u7cfb\u7edf \u53c2\u8003\u94fe\u63a5\uff1a buildroot\u5b98\u7f51 buildroot\u5b98\u65b9\u6587\u6863 buildroot\u4e2d\u6587\u6587\u6863","title":"1. \u4ecb\u7ecd"},{"location":"chap1.html#1","text":"\u5408\u4fe1HMI\u65b0\u5e73\u53f0\u786c\u4ef6\u65b9\u9762\u91c7\u7528\u5168\u5fd7A40i\u4f5c\u4e3a\u4e3b\u63a7\u82af\u7247\uff0c\u8f6f\u4ef6\u91c7\u7528Buildroot\u4f5c\u4e3aHMI\u56fa\u4ef6\u7684\u5f00\u53d1\u73af\u5883","title":"1 \u4ecb\u7ecd"},{"location":"chap1.html#11","text":"\u5168\u5fd7\u5de5\u4e1a\u7ea7A40I (A40i/R40/V40/T3) \u56db\u6838Cortex-A7\uff0c\u4e3b\u9891\u6700\u9ad8\u4e3a1.2GHz\uff0c\u96c6\u6210 Mali400MP2 GPU\uff1b \u652f\u6301\u53cc\u5c4f\u540c\u663e\u5f02\u663e\u548c\u591a\u79cd\u663e\u793a\u63a5\u53e3RGB/MIPI /\u53cc8\u4f4d LVDS /HDMI/TV OUT\uff0c1920x1080@60fps\uff1b \u652f\u63011\u8def\u5343\u5146\u7f51\u7edc\uff0c1\u8def\u767e\u5146\u7f51\u7edc\uff0c\u652f\u6301WIFI/BT4.0\uff0c\u652f\u63014G\uff1b \u652f\u6301\u591a\u8def\u6444\u50cf\u5934\u8f93\u5165\uff0c\u4e24\u8defDVP\u6444\u50cf\u5934\u63a5\u53e3\uff0c\u6700\u9ad8\u652f\u6301500W\u50cf\u7d20\uff0c\u56db\u8defTVIN\uff0c\u652f\u6301NTSC\u4e0e PAL\u5236\u5f0f CPU\u5185\u90e8\u96c6\u6210Audio Codec\uff0c\u652f\u63011\u8def\u5dee\u5206PHONEOUT\uff0c1\u8def\u7acb\u4f53\u58f0\u8033\u673a\u8f93\u51fa ,1\u8defmicrophone\u8f93\u5165 \u5916\u90e8\u6269\u5c55\u63a5\u53e3\u4e30\u5bccUART 8\u3001SD 4\u3001USB 3\u3001SPI 4\u3001IIC 5\u3001SATA\u3001PWM 8\u7b49\uff1b \u652f\u6301Linux\u548cAndroid\u64cd\u4f5c\u7cfb\u7edf\uff1b \u529f\u80fd \u63cf\u8ff0 CPU ARM Cortex-A7 Quad-Core 32 KB (Instruction) / 32 KiB (Data) L1-Cache per core 512 KB L2-Cache (shared between four cores) GPU ARM Mali400 MP2Featuring 1 vertex shader (GP) and 2 fragment shaders (PP) Complies with OpenGL ES 2.0 Memory DDR2/DDR3/DDR3L/LPDDR2/LPDDR3 controller up to 2GB address space NAND Flash controller and 64-bit ECC Video Full HD 1080p video decoding of MPEG-2, MPEG-4 SP/ASP GMC, H.263, H.264, WMV9/VC-1, and VP8 BD Directory, BD ISO and BD m2ts video decoding H.264 High Profile 1080p @ 45 fps encoding Complies with RTSP, HTTP,HLS,RTMP,MMS streaming media protocol Camera 4-channel TVIN Dual-sensor support Audio Integrated HI-FI 100 dB Audio Codec Dual MIC noise cancellation Display Supports output size up to 2048x2048 CPU/RGB/LVDS LCD interface 1920x1080@60fps MIPI 4 lane DSI interface up to 1920x1080@60fps resolution TV out: 4-ch CVBS, 1-ch YPbPr and 1-ch VGA HDMI v1.4 with HDCP 1.2, up to 1920x1080@60fps Connectivity 3 X USB 2.0 , 5 x TWI, 4 x SPI, 8 x UART RTP PS2 SDIO, IR, PMIC AXP221s OS Melis, Linux OS Package FBGA 468 balls,0.65mm ball pitch, 16x16 mm Process 40nm \u53c2\u8003\u94fe\u63a5 \u5168\u5fd7\u5b98\u7f51A40i\u4ea7\u54c1\u4ecb\u7ecd Allwinner A40i Datasheet Allwinner A40i User Manual","title":"1.1 \u82af\u7247\u4ecb\u7ecd"},{"location":"chap1.html#12-buildroot","text":"","title":"1.2 Buildroot\u5f00\u53d1\u73af\u5883"},{"location":"chap1.html#121-buildroot","text":"Buildroot \u662f\u4e00\u4e2a\u7b80\u5355\u9ad8\u6548\u3001\u6613\u4e8e\u4f7f\u7528\u7684\u53ef\u901a\u8fc7\u4ea4\u53c9\u7f16\u8bd1\u6765\u6784\u5efa\u5d4c\u5165\u5f0f Linux \u7cfb\u7edf\u7684\u5de5\u5177\u3002 \u5b83\u80fd\u591f\u5904\u7406\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u3001\u6839\u6587\u4ef6\u7cfb\u7edf\u751f\u6210\u3001\u5185\u6838\u955c\u50cf\u7f16\u8bd1\u548c\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u7f16\u8bd1\u7b49\uff0c\u8fd8\u652f\u6301\u6570\u5343\u79cd\u8f6f\u4ef6\u5305\uff0c\u4f8b\u5982 Gtk3\u3001QT5\u3001GStreamer\u3001Webkit \u4ee5\u53ca\u5927\u91cf\u4e0e\u7f51\u7edc\u76f8\u5173\u3001\u7cfb\u7edf\u76f8\u5173\u7684\u5b9e\u7528\u5de5\u5177\u3002Buildroot \u91c7\u7528\u7c7b\u4f3c\u4e8e linux \u5185\u6838\u7684 menuconfig\u3001gconfig \u548c xconfig \u914d\u7f6e\u754c\u9762\uff0c\u56e0\u6b64\u4f7f\u7528 Buildroot \u6784\u5efa\u4e00\u4e2a\u57fa\u672c\u7684\u7cfb\u7edf\u662f\u975e\u5e38\u8f7b\u677e\u7684\uff0c\u8fd9\u901a\u5e38\u4f1a\u82b1\u8d39 15-30 \u5206\u949f\u3002\u540c\u65f6\uff0cBuildroot \u662f\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5bf9\u5b83\u505a\u51fa\u8d21\u732e\uff0c\u6765\u8ba9 Buildroot \u53d8\u5f97\u66f4\u52a0\u5b8c\u5584\u3002 buildroot \u5b98\u65b9\u7f51\u7ad9 buildroot \u4e3b\u754c\u9762","title":"1.2.1 Buildroot \u7b80\u4ecb"},{"location":"chap1.html#122-buildroot","text":"","title":"1.2.2 Buildroot \u4f7f\u7528\u7b80\u4ecb"},{"location":"chap1.html#1221-buildroot","text":"\u251c\u2500\u2500 arch //\u5b58\u653eCPU\u67b6\u6784\u76f8\u5173\u7684\u914d\u7f6e\u811a\u672c\uff0c\u4f8b\u5982ARM\uff0cX86\uff0cMIPS\u7b49 \u251c\u2500\u2500 board //\u5b58\u653e\u5f00\u53d1\u677f\u7684\u677f\u7ea7\u914d\u7f6e\u53c2\u6570 \u251c\u2500\u2500 boot //\u5b58\u653eBootloader\u7684\u81ea\u52a8\u6784\u5efa\u811a\u672c \u251c\u2500\u2500 CHANGES \u251c\u2500\u2500 Config.in \u251c\u2500\u2500 Config.in.legacy \u251c\u2500\u2500 configs \u251c\u2500\u2500 COPYING \u251c\u2500\u2500 DEVELOPERS \u251c\u2500\u2500 dl //\u5b58\u653e\u4e0b\u8f7d\u7684\u6e90\u4ee3\u7801\u4ee5\u53ca\u5e94\u7528\u8f6f\u4ef6\u7684\u538b\u7f29\u5305 \u251c\u2500\u2500 docs //\u5b58\u653e\u76f8\u5173\u7684\u53c2\u8003\u6587\u6863 \u251c\u2500\u2500 fs //\u5b58\u653e\u751f\u6210\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf\u7684\u5efa\u6784\u811a\u672c \u251c\u2500\u2500 linux //\u5b58\u653eLinux Kernel\u7684\u81ea\u52a8\u6784\u5efa\u811a\u672c \u251c\u2500\u2500 Makefile \u251c\u2500\u2500 Makefile.legacy \u251c\u2500\u2500 output //\u5b58\u653e\u7f16\u8bd1\u751f\u6210\u8f93\u51fa\u7684\u6587\u4ef6 \u251c\u2500\u2500 build //\u5b58\u653e\u6e90\u4ee3\u7801\u89e3\u538b\u7f16\u8bd1\u5b8c\u6210\u540e\u7684\u73b0\u573a \u251c\u2500\u2500 host //\u5b58\u653e\u5236\u4f5c\u597d\u7684\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u4f8b\u5982GCC\uff0c\u4ea4\u53c9\u7f16\u8bd1\u94fe\u5de5\u5177\u7b49 \u251c\u2500\u2500 images //\u5b58\u653eBuildroot\u7f16\u8bd1\u6700\u7ec8\u751f\u6210\u751f\u6210\u7684Bootloader,zImage,rootfs \u7b49\u955c\u50cf\u6587\u4ef6 \u251c\u2500\u2500 staging \u2514\u2500\u2500 target //\u7528\u6765\u5b58\u653e\u5efa\u6784\u6839\u6587\u4ef6\u7684\u57fa\u672c\u76ee\u5f55\u7ed3\u6784\uff0c\u653e\u7f6e\u4ea4\u53c9\u7f16\u8bd1\u751f\u6210\u7684ELF\u53ef\u6267\u884c\u6587\u4ef6\u548cso\u52a8\u6001\u5e93 \u251c\u2500\u2500 package //\u5b58\u653e\u7b2c\u4e09\u65b9\u5f00\u5143\u5305\u7684\u81ea\u52a8\u7f16\u8bd1\u6784\u5efa\u811a\u672c \u251c\u2500\u2500 README \u251c\u2500\u2500 support \u251c\u2500\u2500 system //\u5b58\u653e\u6587\u4ef6\u7cfb\u7edf\u76ee\u5f55\u548c\u8bbe\u5907\u8282\u70b9\u7684\u6a21\u677f \u251c\u2500\u2500 toolchain //\u5b58\u653e\u5236\u4f5c\u5de5\u5177\u94fe\u7684\u811a\u672c \u2514\u2500\u2500 utils","title":"1.2.2.1 Buildroot\u76ee\u5f55\u7ed3\u6784"},{"location":"chap1.html#1222","text":"\u7f16\u8bd1\u5de5\u5177\u94fe\u662f\u4e00\u7ec4\u5141\u8bb8\u60a8\u4e3a\u76ee\u6807\u7cfb\u7edf\u7f16\u8bd1\u4ee3\u7801\u7684\u5de5\u5177\u3002\u5b83\u7531\u4e00\u4e2a\u7f16\u8bd1\u5668(\u5728\u6211\u4eec\u73af\u5883\u4e0b\u4e3a gcc)\u3001\u4e8c\u8fdb\u5236\u5de5\u5177(\u6bd4\u5982\u6c47\u7f16\u5668\u548c\u94fe\u63a5\u5668\uff0c\u5728\u6211\u4eec\u73af\u5883\u4e0b\u4e3a binutils)\u4ee5\u53ca\u4e00\u4e2a C \u6807\u51c6\u5e93(\u5982 G NU Libc\u3001uClibc-ng)\u7ec4\u6210\u3002 \u5b89\u88c5\u5728\u5f00\u53d1\u5de5\u4f5c\u7ad9\u4e0a\u7684\u7cfb\u7edf\u80af\u5b9a\u5df2\u6709\u4e00\u4e2a\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u53ef\u7528\u5b83\u6765\u7f16\u8bd1\u5728\u7cfb\u7edf\u4e0a\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u5982\u679c\u4f7f\u7528\u7684\u662f PC\uff0c\u5219\u8be5\u7f16\u8bd1\u5de5\u5177\u94fe\u53ef\u5728 x86 \u5904\u7406\u5668\u4e0a\u8fd0\u884c\uff0c\u5e76\u4e3a x86 \u5904\u7406\u5668\u751f\u6210\u4ee3\u7801\u3002 \u5728\u5927\u591a\u6570Linux\u7cfb\u7edf\u4e2d\uff0c\u7f16\u8bd1\u5de5\u5177\u94fe\u4f7f\u7528GNU libc(glibc)\u4f5c\u4e3aC\u6807\u51c6\u5e93\u3002\u8fd9\u79cd\u7f16\u8bd1\u5de5\u5177\u94fe\u79f0 \u4e3a\u201c\u5bbf\u4e3b\u673a\u7f16\u8bd1\u5de5\u5177\u94fe\u201d\u3002\u5de5\u5177\u94fe\u5728\u4e0a\u9762\u8fd0\u884c\u5e76\u4e14\u60a8\u5728\u5176\u4e0a\u5de5\u4f5c\u7684\u8ba1\u7b97\u673a\u79f0\u4e3a\u201c\u5bbf\u4e3b\u673a\u7cfb\u7edf\u201d \u3002 \u7f16\u8bd1\u5de5\u5177\u94fe\u7531\u60a8\u7684\u53d1\u884c\u7248\u63d0\u4f9b\uff0c\u800c Buildroot \u4e0e\u5b83\u65e0\u5173(\u9664\u4e86\u4f7f\u7528\u5b83\u6765\u6784\u5efa\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u548c\u5728\u5f00\u53d1\u4e3b\u673a\u4e0a\u8fd0\u884c\u7684\u5176\u4ed6\u5de5\u5177)\u3002 \u5982\u4e0a\u6240\u8ff0\uff0c\u7cfb\u7edf\u968f\u9644\u7684\u7f16\u8bd1\u5de5\u5177\u94fe\u53ef\u5728\u5bbf\u4e3b\u673a\u4e0a\u8fd0\u884c\u5e76\u4e3a\u5bbf\u4e3b\u673a\u7cfb\u7edf\u4e2d\u7684\u5904\u7406\u5668\u751f\u6210\u4ee3\u7801\u3002 \u7531\u4e8e\u5d4c\u5165\u5f0f\u7cfb\u7edf\u5177\u6709\u4e0d\u540c\u7684\u5904\u7406\u5668\uff0c\u56e0\u6b64\u9700\u8981\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe-\u4e00\u79cd\u80fd\u5728\u4e3b\u673a\u7cfb\u7edf\u4e0a \u8fd0\u884c\u4f46\u4e3a\u76ee\u6807\u7cfb\u7edf(\u548c\u76ee\u6807\u5904\u7406\u5668)\u751f\u6210\u4ee3\u7801\u7684\u7f16\u8bd1\u5de5\u5177\u94fe\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4e3b\u673a\u7cfb\u7edf\u4f7f\u7528x86\uff0c\u800c\u76ee\u6807\u7cfb\u7edf\u4f7f\u7528 ARM\uff0c\u5219\u4e3b\u673a\u4e0a\u7684\u5e38\u89c4\u7f16\u8bd1\u5de5\u5177\u94fe\u662f\u5728 x86 \u4e0a\u8fd0\u884c\u5e76\u4e3a x86 \u751f\u6210\u4ee3\u7801\uff0c\u800c \u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u662f\u5728 x86 \u4e0a\u8fd0\u884c\u5e76\u4e3a ARM \u751f\u6210\u4ee3\u7801\u3002 Buildroot \u4e3a\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u63d0\u4f9b\u4e24\u79cd\u89e3\u51b3\u65b9\u6848: \u5185\u90e8\u5de5\u5177\u94fe\u540e\u7aef\uff0c\u5728\u914d\u7f6e\u754c\u9762\u4e2d\u8c03\u7528\u201cBuildroot toolchain\u201d\u3002 \u5916\u90e8\u5de5\u5177\u94fe\u540e\u7aef\uff0c\u5728\u914d\u7f6e\u754c\u9762\u4e2d\u8c03\u7528\u201cExternal toolchain\u201d\u3002 \u672c\u6b21\u9009\u62e9External toolchain","title":"1.2.2.2 \u5173\u4e8e\u5de5\u5177\u94fe"},{"location":"chap1.html#1223","text":"\u547d\u4ee4 \u63cf\u8ff0 make menuconfig \u6253\u5f00\u4ea4\u4e92\u5f0f\u914d\u7f6e\u83dc\u5355 make \u57fa\u4e8e\u5f53\u524d\u914d\u7f6e\u6784\u5efa\u7cfb\u7edf\uff0c\u5305\u62ec\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u3001\u5185\u6838\u3001\u6587\u4ef6\u7cfb\u7edf\u3001\u8bbe\u5907\u6811\u7b49 make clean \u6e05\u9664\u6784\u5efa\u8fc7\u7a0b\u4e2d\u751f\u6210\u7684\u6240\u6709\u4e34\u65f6\u6587\u4ef6\uff0c\u4f46\u4fdd\u7559\u914d\u7f6e\u6587\u4ef6 make distclean \u6e05\u9664\u6784\u5efa\u8fc7\u7a0b\u4e2d\u751f\u6210\u7684\u6240\u6709\u4e34\u65f6\u6587\u4ef6\u53ca\u751f\u6210\u7684\u914d\u7f6e\u6587\u4ef6 make savedefconfig \u5c06\u5f53\u524d\u914d\u7f6e\u4fdd\u5b58\u4e3a\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u4e8e\u540e\u7eed\u4f7f\u7528 make xxx_defconfig \u9009\u62e9\u7279\u5b9a\u677f\u5b50\u7684\u9ed8\u8ba4\u914d\u7f6e make linux-menuconfig \u6253\u5f00\u5185\u6838\u4ea4\u4e92\u5f0f\u914d\u7f6e\u83dc\u5355\uff0c\u5141\u8bb8\u7528\u6237\u9009\u62e9\u5185\u6838\u7f16\u8bd1\u9009\u9879\u3001\u9a71\u52a8\u7a0b\u5e8f\u7b49 make linux-clean \u6e05\u9664\u5185\u6838\u6784\u5efa\u671f\u95f4\u751f\u6210\u7684\u4e34\u65f6\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6 make linux-dirclean \u6e05\u9664\u5185\u6838\u751f\u6210\u7684\u6240\u6709\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6 make busybox-menuconfig \u6253\u5f00 Busybox \u4ea4\u4e92\u5f0f\u914d\u7f6e\u83dc\u5355\uff0c\u5141\u8bb8\u7528\u6237\u9009\u62e9 Busybox \u5305\u542b\u7684\u5de5\u5177\u3001\u9009\u9879\u7b49 make busybox-clean \u6e05\u9664 Busybox \u6784\u5efa\u8fc7\u7a0b\u4e2d\u751f\u6210\u7684\u4e34\u65f6\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6 make busybox-dirclean \u6e05\u9664 Busybox \u751f\u6210\u7684\u6240\u6709\u6587\u4ef6\u548c\u76ee\u6807\u6587\u4ef6 make sdk \u521b\u5efa SDK \u5de5\u5177\u5305\uff0c\u5176\u4e2d\u5305\u542b\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u548c rootfs \u6587\u4ef6\u7cfb\u7edf\u7b49\uff0c\u53ef\u7528\u4e8e\u5c06\u5e94\u7528\u7a0b\u5e8f\u4ea4\u4ed8\u7ed9\u5176\u4ed6\u5f00\u53d1\u4eba\u5458\u6216\u5ba2\u6237 make\u547d\u4ee4\u901a\u5e38\u5c06\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a \u4e0b\u8f7d\u6e90\u6587\u4ef6\uff08\u6839\u636e\u9700\u8981\uff09\uff1b \u914d\u7f6e\u3001\u6784\u5efa\u548c\u5b89\u88c5\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u6216\u4ec5\u5bfc\u5165\u5916\u90e8\u5de5\u5177\u94fe \u914d\u7f6e\u3001\u6784\u5efa\u548c\u5b89\u88c5\u9009\u5b9a\u7684\u76ee\u6807\u8f6f\u4ef6\u5305\uff1b \u6784\u5efa\u5185\u6838\u6620\u50cf\uff08\u5982\u679c\u914d\u7f6e\u4e86\u8be5\u9009\u9879\uff09 \u6784\u5efa\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u6620\u50cf\uff08\u5982\u679c\u914d\u7f6e\u4e86\u8be5\u9009\u9879\uff09 \u4ee5\u9009\u5b9a\u7684\u683c\u5f0f\u521b\u5efa\u4e00\u4e2a\u6839\u6587\u4ef6\u7cfb\u7edf \u53c2\u8003\u94fe\u63a5\uff1a buildroot\u5b98\u7f51 buildroot\u5b98\u65b9\u6587\u6863 buildroot\u4e2d\u6587\u6587\u6863","title":"1.2.2.3 \u5e38\u7528\u547d\u4ee4"},{"location":"chap2.html","text":"\u786c\u4ef6\u76f8\u5173\u77e5\u8bc6 HMI\u4e3b\u8981\u8d44\u6e90 \u4e3b\u8981\u62e5\u6709\u4ee5\u4e0b\u8d44\u6e90\uff1a \u677f\u8f7d\u4e00\u7247\u5bb9\u91cf\u4e3a256MB \u7684DDR3 \u5185\u5b58 \u677f\u8f7d\u4e00\u7247\u5bb9\u91cf\u4e3a256MB NAND Flash \u95ea\u5b58 \u677f\u8f7d\u4e24\u4e2aUSB HOST \u677f\u8f7d\u4e00\u4e2aGMAC\u5343\u5146\u6709\u7ebf\u7f51\u53e3 \u677f\u8f7dRGB565\u63a5\u53e3 \u677f\u8f7d\u4e00\u4e2a\u8702\u9e23\u5668 \u677f\u8f7d\u4e00\u4e2aLED\u706f\u8f93\u51fa \u624b\u518c\u8d44\u6599 \u82af\u7247\u624b\u518c\uff1a Allwinner A40i Datasheet \u7528\u6237\u624b\u518c\uff1a Allwinner A40i User Manual \u539f\u7406\u56fe: schematic \u7ba1\u811a\u590d\u7528\u60c5\u51b5 \u786c\u4ef6\u529f\u80fd\u5206\u7ec4 \u5f15\u811a\u53f7 GMAC PA0, PA1, PA2, PA3, PA4, PA5, PA6, PA7, PA8, PA9, PA10, PA11, PA12, PA13, PA14, PA15, PA16, PA17 \u7f51\u7edcPHY\u590d\u4f4d\u5f15\u811a PH22 NAND FLASH PC0, PC1, PC2, PC3, PC4, PC5, PC6, PC7, PC8, PC9, PC10, PC11, PC12, PC13, PC14, PC15, PC16 LCD-RGB PD3, PD4, PD5, PD6, PD7, PD10, PD11, PD12, PD13, PD14, PD15, PD19, PD20, PD21, PD22, PD23, PD24, PD25, PD26, PD27 BACKLIGHT\u80cc\u5149\u5f00\u5173 PB9 \u8702\u9e23\u5668PWM PB2 UART 0 PB22, PB23 UART 2 PI16, PI17, PI18, PI19 RS485 \u6536\u53d1\u5668\u4f7f\u80fd\u5f00\u5173 PB3 I2C 0 PB0, PB1 I2C 1 PB18, PB19 GREEN LED \u7eff\u706f PG6 USB OTG VBUS \u4f7f\u80fd\u5f00\u5173 PI13","title":"2. \u786c\u4ef6\u76f8\u5173\u77e5\u8bc6"},{"location":"chap2.html#_1","text":"","title":"\u786c\u4ef6\u76f8\u5173\u77e5\u8bc6"},{"location":"chap2.html#hmi","text":"\u4e3b\u8981\u62e5\u6709\u4ee5\u4e0b\u8d44\u6e90\uff1a \u677f\u8f7d\u4e00\u7247\u5bb9\u91cf\u4e3a256MB \u7684DDR3 \u5185\u5b58 \u677f\u8f7d\u4e00\u7247\u5bb9\u91cf\u4e3a256MB NAND Flash \u95ea\u5b58 \u677f\u8f7d\u4e24\u4e2aUSB HOST \u677f\u8f7d\u4e00\u4e2aGMAC\u5343\u5146\u6709\u7ebf\u7f51\u53e3 \u677f\u8f7dRGB565\u63a5\u53e3 \u677f\u8f7d\u4e00\u4e2a\u8702\u9e23\u5668 \u677f\u8f7d\u4e00\u4e2aLED\u706f\u8f93\u51fa","title":"HMI\u4e3b\u8981\u8d44\u6e90"},{"location":"chap2.html#_2","text":"\u82af\u7247\u624b\u518c\uff1a Allwinner A40i Datasheet \u7528\u6237\u624b\u518c\uff1a Allwinner A40i User Manual \u539f\u7406\u56fe: schematic","title":"\u624b\u518c\u8d44\u6599"},{"location":"chap2.html#_3","text":"\u786c\u4ef6\u529f\u80fd\u5206\u7ec4 \u5f15\u811a\u53f7 GMAC PA0, PA1, PA2, PA3, PA4, PA5, PA6, PA7, PA8, PA9, PA10, PA11, PA12, PA13, PA14, PA15, PA16, PA17 \u7f51\u7edcPHY\u590d\u4f4d\u5f15\u811a PH22 NAND FLASH PC0, PC1, PC2, PC3, PC4, PC5, PC6, PC7, PC8, PC9, PC10, PC11, PC12, PC13, PC14, PC15, PC16 LCD-RGB PD3, PD4, PD5, PD6, PD7, PD10, PD11, PD12, PD13, PD14, PD15, PD19, PD20, PD21, PD22, PD23, PD24, PD25, PD26, PD27 BACKLIGHT\u80cc\u5149\u5f00\u5173 PB9 \u8702\u9e23\u5668PWM PB2 UART 0 PB22, PB23 UART 2 PI16, PI17, PI18, PI19 RS485 \u6536\u53d1\u5668\u4f7f\u80fd\u5f00\u5173 PB3 I2C 0 PB0, PB1 I2C 1 PB18, PB19 GREEN LED \u7eff\u706f PG6 USB OTG VBUS \u4f7f\u80fd\u5f00\u5173 PI13","title":"\u7ba1\u811a\u590d\u7528\u60c5\u51b5"},{"location":"chap3.html","text":"3.\u642d\u5efa\u5f00\u53d1\u73af\u5883 \u5f00\u53d1\u73af\u5883\u9009\u62e9Ubuntu 18.04 LTS, \u53ef\u4ee5\u7ed3\u5408\u81ea\u5df1\u7684\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\u91c7\u7528\u865a\u62df\u673a\u6216\u8005\u5b9e\u4f53\u673a\u8fd0\u884c,\u5173\u4e8e\u865a\u62df\u673a\u5b89\u88c5Ubuntu 18.04 LTS \u53ef\u4ee5\u53c2\u8003 VMware Ubuntu 18.04.6 LTS \u5b89\u88c5\u6b65\u9aa4 3.1 \u66f4\u6362\u4e3a\u56fd\u5185\u6e90 Ubuntu\u7cfb\u7edf\u4e2d\uff0c\u8f6f\u4ef6\u6e90\u6587\u4ef6\u5730\u5740\u4e3a\uff1a/etc/apt/sources.list 1.\u5907\u4efd\u539f\u6765\u7684\u6e90\uff0c\u5c06\u4ee5\u524d\u7684\u6e90\u5907\u4efd\u4e00\u4e0b\uff0c\u4ee5\u9632\u4ee5\u540e\u53ef\u4ee5\u7528\u7684\u3002 sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak 2.\u6253\u5f00/etc/apt/sources.list\u6587\u4ef6\uff0c\u5728\u524d\u9762\u6dfb\u52a0\u5982\u4e0b\u6761\u76ee\uff0c\u5e76\u4fdd\u5b58\u3002 sudo gedit /etc/apt/sources.list\uff08\u53ef\u5c06gedit\u66f4\u6362\u4e3a\u81ea\u5df1\u719f\u6089\u7684\u7f16\u8f91\u5668\uff09 deb http://cn.archive.ubuntu.com/ubuntu/ boinc main restricted universe multiverse deb http://cn.archive.ubuntu.com/ubuntu/ boinc-security main restricted universe multiverse deb http://cn.archive.ubuntu.com/ubuntu/ boinc-updates main restricted universe multiverse deb http://cn.archive.ubuntu.com/ubuntu/ boinc-backports main restricted universe multiverse ##\u6e2c\u8a66\u7248\u6e90 deb http://cn.archive.ubuntu.com/ubuntu/ boinc-proposed main restricted universe multiverse # \u6e90\u78bc deb-src http://cn.archive.ubuntu.com/ubuntu/ boinc main restricted universe multiverse deb-src http://cn.archive.ubuntu.com/ubuntu/ boinc-security main restricted universe multiverse deb-src http://cn.archive.ubuntu.com/ubuntu/ boinc-updates main restricted universe multiverse deb-src http://cn.archive.ubuntu.com/ubuntu/ boinc-backports main restricted universe multiverse ##\u6e2c\u8a66\u7248\u6e90 deb-src http://cn.archive.ubuntu.com/ubuntu/ boinc-proposed main restricted universe multiverse # Canonical \u5408\u4f5c\u5925\u4f34\u548c\u9644\u52a0 deb http://archive.canonical.com/ubuntu/ boinc partner deb http://extras.ubuntu.com/ubuntu/ boinc main 3.\u66f4\u65b0 \u66f4\u65b0\u6e90 sudo apt-get update \u5982\u51fa\u73b0\u4f9d\u8d56\u95ee\u9898\uff0c\u89e3\u51b3\u65b9\u5f0f\u5982\u4e0b\uff1a sudo apt-get -f install \u66f4\u65b0\u8f6f\u4ef6\uff1a sudo apt-get upgrade 3.2 \u5b89\u88c5\u57fa\u7840\u4f9d\u8d56 sudo apt-get install xz-utils nano wget unzip build-essential git bc swig libncurses5-dev libpython3-dev libssl-dev pkg-config zlib1g-dev libusb-dev libusb-1.0-0-dev python3-pip gawk bison flex fastboot mkbootimg 3.3 \u5b89\u88c5\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe \u83b7\u53d6 arm-buildroot-linux-gnueabihf_sdk-buildroot.tar.gz \u5c06\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u5b89\u88c5\u5230/opt\u4f4d\u7f6e\u4e0b,\u9700\u8981sudo\u6743\u9650 sudo tar xvf arm-buildroot-linux-gnueabihf_sdk-buildroot.tar.gz -C /opt \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b8c\u6210\u5bf9SDK\u7684\u91cd\u5b9a\u4f4d sudo /opt/arm-buildroot-linux-gnueabihf_sdk-buildroot/relocate-sdk.sh \u6267\u884cSDK\u91cd\u5b9a\u4f4d\u5b8c\u6210\u540e,\u5c06\u4ea4\u53c9\u5de5\u5177\u94feSDK\u7684\u8def\u5f84\u6dfb\u52a0\u8fdb\u73af\u5883\u53d8\u91cf, \u8fd9\u91cc\u7684 shell \u4ee5 bash \u4e3a\u4f8b \u6dfb\u52a0\u4ee5\u4e0b\u73af\u5883\u53d8\u91cf echo 'export PATH=$PATH:/opt/arm-buildroot-linux-gnueabihf_sdk-buildroot/bin/'>>~/.bashrc \u6dfb\u52a0\u5b8c\u6210\u540e\uff0c\u70b9\u51fb\u4fdd\u5b58 \u4f7f\u73af\u5883\u53d8\u91cf\u7acb\u5373\u751f\u6548 \uff1a source ~/.bashrc \u8f93\u5165 arm-linux-gnueabihf-gcc --version \u7136\u540e\u6309\u56de\u8f66\u3002\u5982\u679c\u80fd\u770b\u5230\u4e0b\u6240\u793a\u7684\u7248\u672c\u53f7\uff0c\u5373\u8bf4\u660e\u914d\u7f6e\u6210\u529f\uff1b\u5982\u679c\u63d0\u793a\u547d\u4ee4\u6ca1\u6709\u627e\u5230\uff0c\u90a3\u4e48\u9700\u8981\u68c0\u67e5\u5de5\u5177\u94fe\u662f\u5426\u4e0b\u8f7d\u5b8c\u6574\u6216\u89e3\u538b\u5b8c\u6574\uff0c\u6216\u8005\u68c0\u67e5\u73af\u5883\u53d8\u91cf\u4e2d\u7684\u8def\u5f84\u662f\u5426\u586b\u5199\u6b63\u786e\u3002\u5bf9\u4e8e\u6b64\u5de5\u5177\u94fe\uff0c\u5728\u73af\u5883\u53d8\u91cf\u91cc\u586b\u5199\u7684\u8def\u5f84\u4e2d\u4e0d\u80fd\u51fa\u73b0\u4e2d\u6587\u6216\u8005\u7279\u6b8a\u5b57\u7b26\u3002 \u279c ~ arm-linux-gnueabihf-gcc --version arm-linux-gnueabihf-gcc (Linaro GCC 7.3-2018.05) 7.3.1 20180425 [linaro-7.3-2018.05 revision d29120a424ecfbc167ef90065c0eeb7f91977701] Copyright (C) 2017 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.","title":"3. \u642d\u5efa\u5f00\u53d1\u73af\u5883"},{"location":"chap3.html#3","text":"\u5f00\u53d1\u73af\u5883\u9009\u62e9Ubuntu 18.04 LTS, \u53ef\u4ee5\u7ed3\u5408\u81ea\u5df1\u7684\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\u91c7\u7528\u865a\u62df\u673a\u6216\u8005\u5b9e\u4f53\u673a\u8fd0\u884c,\u5173\u4e8e\u865a\u62df\u673a\u5b89\u88c5Ubuntu 18.04 LTS \u53ef\u4ee5\u53c2\u8003 VMware Ubuntu 18.04.6 LTS \u5b89\u88c5\u6b65\u9aa4","title":"3.\u642d\u5efa\u5f00\u53d1\u73af\u5883"},{"location":"chap3.html#31","text":"Ubuntu\u7cfb\u7edf\u4e2d\uff0c\u8f6f\u4ef6\u6e90\u6587\u4ef6\u5730\u5740\u4e3a\uff1a/etc/apt/sources.list 1.\u5907\u4efd\u539f\u6765\u7684\u6e90\uff0c\u5c06\u4ee5\u524d\u7684\u6e90\u5907\u4efd\u4e00\u4e0b\uff0c\u4ee5\u9632\u4ee5\u540e\u53ef\u4ee5\u7528\u7684\u3002 sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak 2.\u6253\u5f00/etc/apt/sources.list\u6587\u4ef6\uff0c\u5728\u524d\u9762\u6dfb\u52a0\u5982\u4e0b\u6761\u76ee\uff0c\u5e76\u4fdd\u5b58\u3002 sudo gedit /etc/apt/sources.list\uff08\u53ef\u5c06gedit\u66f4\u6362\u4e3a\u81ea\u5df1\u719f\u6089\u7684\u7f16\u8f91\u5668\uff09 deb http://cn.archive.ubuntu.com/ubuntu/ boinc main restricted universe multiverse deb http://cn.archive.ubuntu.com/ubuntu/ boinc-security main restricted universe multiverse deb http://cn.archive.ubuntu.com/ubuntu/ boinc-updates main restricted universe multiverse deb http://cn.archive.ubuntu.com/ubuntu/ boinc-backports main restricted universe multiverse ##\u6e2c\u8a66\u7248\u6e90 deb http://cn.archive.ubuntu.com/ubuntu/ boinc-proposed main restricted universe multiverse # \u6e90\u78bc deb-src http://cn.archive.ubuntu.com/ubuntu/ boinc main restricted universe multiverse deb-src http://cn.archive.ubuntu.com/ubuntu/ boinc-security main restricted universe multiverse deb-src http://cn.archive.ubuntu.com/ubuntu/ boinc-updates main restricted universe multiverse deb-src http://cn.archive.ubuntu.com/ubuntu/ boinc-backports main restricted universe multiverse ##\u6e2c\u8a66\u7248\u6e90 deb-src http://cn.archive.ubuntu.com/ubuntu/ boinc-proposed main restricted universe multiverse # Canonical \u5408\u4f5c\u5925\u4f34\u548c\u9644\u52a0 deb http://archive.canonical.com/ubuntu/ boinc partner deb http://extras.ubuntu.com/ubuntu/ boinc main 3.\u66f4\u65b0 \u66f4\u65b0\u6e90 sudo apt-get update \u5982\u51fa\u73b0\u4f9d\u8d56\u95ee\u9898\uff0c\u89e3\u51b3\u65b9\u5f0f\u5982\u4e0b\uff1a sudo apt-get -f install \u66f4\u65b0\u8f6f\u4ef6\uff1a sudo apt-get upgrade","title":"3.1 \u66f4\u6362\u4e3a\u56fd\u5185\u6e90"},{"location":"chap3.html#32","text":"sudo apt-get install xz-utils nano wget unzip build-essential git bc swig libncurses5-dev libpython3-dev libssl-dev pkg-config zlib1g-dev libusb-dev libusb-1.0-0-dev python3-pip gawk bison flex fastboot mkbootimg","title":"3.2 \u5b89\u88c5\u57fa\u7840\u4f9d\u8d56"},{"location":"chap3.html#33","text":"\u83b7\u53d6 arm-buildroot-linux-gnueabihf_sdk-buildroot.tar.gz \u5c06\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u5b89\u88c5\u5230/opt\u4f4d\u7f6e\u4e0b,\u9700\u8981sudo\u6743\u9650 sudo tar xvf arm-buildroot-linux-gnueabihf_sdk-buildroot.tar.gz -C /opt \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b8c\u6210\u5bf9SDK\u7684\u91cd\u5b9a\u4f4d sudo /opt/arm-buildroot-linux-gnueabihf_sdk-buildroot/relocate-sdk.sh \u6267\u884cSDK\u91cd\u5b9a\u4f4d\u5b8c\u6210\u540e,\u5c06\u4ea4\u53c9\u5de5\u5177\u94feSDK\u7684\u8def\u5f84\u6dfb\u52a0\u8fdb\u73af\u5883\u53d8\u91cf, \u8fd9\u91cc\u7684 shell \u4ee5 bash \u4e3a\u4f8b \u6dfb\u52a0\u4ee5\u4e0b\u73af\u5883\u53d8\u91cf echo 'export PATH=$PATH:/opt/arm-buildroot-linux-gnueabihf_sdk-buildroot/bin/'>>~/.bashrc \u6dfb\u52a0\u5b8c\u6210\u540e\uff0c\u70b9\u51fb\u4fdd\u5b58 \u4f7f\u73af\u5883\u53d8\u91cf\u7acb\u5373\u751f\u6548 \uff1a source ~/.bashrc \u8f93\u5165 arm-linux-gnueabihf-gcc --version \u7136\u540e\u6309\u56de\u8f66\u3002\u5982\u679c\u80fd\u770b\u5230\u4e0b\u6240\u793a\u7684\u7248\u672c\u53f7\uff0c\u5373\u8bf4\u660e\u914d\u7f6e\u6210\u529f\uff1b\u5982\u679c\u63d0\u793a\u547d\u4ee4\u6ca1\u6709\u627e\u5230\uff0c\u90a3\u4e48\u9700\u8981\u68c0\u67e5\u5de5\u5177\u94fe\u662f\u5426\u4e0b\u8f7d\u5b8c\u6574\u6216\u89e3\u538b\u5b8c\u6574\uff0c\u6216\u8005\u68c0\u67e5\u73af\u5883\u53d8\u91cf\u4e2d\u7684\u8def\u5f84\u662f\u5426\u586b\u5199\u6b63\u786e\u3002\u5bf9\u4e8e\u6b64\u5de5\u5177\u94fe\uff0c\u5728\u73af\u5883\u53d8\u91cf\u91cc\u586b\u5199\u7684\u8def\u5f84\u4e2d\u4e0d\u80fd\u51fa\u73b0\u4e2d\u6587\u6216\u8005\u7279\u6b8a\u5b57\u7b26\u3002 \u279c ~ arm-linux-gnueabihf-gcc --version arm-linux-gnueabihf-gcc (Linaro GCC 7.3-2018.05) 7.3.1 20180425 [linaro-7.3-2018.05 revision d29120a424ecfbc167ef90065c0eeb7f91977701] Copyright (C) 2017 Free Software Foundation, Inc. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.","title":"3.3 \u5b89\u88c5\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe"},{"location":"chap4.html","text":"U-Boot 4.1 U-Boot \u7b80\u4ecb U-Boot\u5c5e\u4e8eBootLoader\u7684\u4e00\u79cd\uff0c\u800cBootLoader\u662f\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8fd0\u884c\u4e4b\u524d\u8fd0\u884c\uff0c\u4e5f\u5c31\u662f\u5f15\u5bfc\u786c\u4ef6\u4ece\u4e0a\u7535\u5230\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fc7\u7a0b\uff0cBootLoader\u5c31\u662f\u8fd9\u4e48\u4e00\u6bb5\u5c0f\u7a0b\u5e8f\u3002 \u5b8f\u89c2\u7684\u770b\uff0cBootLoader\u4e3b\u8981\u7684\u5de5\u4f5c\u5c31\u662f\u521d\u59cb\u5316\u786c\u4ef6\u8bbe\u5907\u3001\u5efa\u7acb\u5185\u5b58\u7a7a\u95f4\u7684\u6620\u5c04\u8868\uff0c\u6700\u7ec8\u521b\u5efa\u4e00\u4e2a\u9002\u5f53\u7684\u7cfb\u7edf\u8f6f\u786c\u4ef6\u73af\u5883\u3002 \u5fae\u89c2\u7684\u770bBootLoader\u7a0b\u5e8f\u4f1a\u5148\u521d\u59cb\u5316 DDR \u7b49\u5916\u8bbe\uff0c\u7136\u540e\u5c06 Linux \u5185\u6838\u4ece flash(NAND\u3001NOR FLASH\u3001SD\u3001MMC \u7b49)\u62f7\u8d1d\u5230DDR \u4e2d\uff0c\u6700\u540e\u542f\u52a8 Linux \u5185\u6838\u3002\u5f53\u7136\u4e86\uff0cBootLoader\u7684\u5b9e\u9645\u5de5\u4f5c\u8981\u590d\u6742\u7684\u591a\uff0c\u4f46\u662f\u5b83\u6700\u4e3b\u8981\u7684\u5de5\u4f5c\u5c31\u662f\u542f\u52a8 Linux \u5185\u6838\u3002 4.2 U-Boot \u76ee\u5f55\u7ed3\u6784 \u4ee5U-boot-2021.04 \u6e90\u7801\u4e3a\u4f8b . \u251c\u2500\u2500 api //\u5c01\u88c5\u4e00\u4e9b\u5e73\u53f0\u65e0\u5173\u7684\u64cd\u4f5c\uff0c\u5982\u5b57\u7b26\u4e32\u6253\u5370\uff0c\u663e\u793a\uff0c\u7f51\u7edc\uff0c\u5185\u5b58 \u251c\u2500\u2500 arch //\u4ee5\u5e73\u53f0\u67b6\u6784\u533a\u5206 \u2502 \u251c\u2500\u2500arm \u2502 \u2502 \u2514\u2500\u2500cpu \u2502 \u2502 \u2502 \u2514\u2500\u2500armv7 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500sunxi //cpu\u76f8\u5173\u7684\u4e00\u4e9b\u64cd\u4f5c\uff0c\u5982\u5b9a\u65f6\u5668\u8bfb\u53d6 \u2502 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500u-boot-spl.lds //spl\u7684\u653e\u7f6e\u65b9\u6cd5 \u2502 \u2502 \u2514\u2500\u2500dts \u2502 \u2502 \u2502 \u2514\u2500\u2500sun8i-v40-bananapi-m2-berry.dtb // a40i\u82af\u7247\u7684\u4e00\u4e9b\u914d\u7f6e \u2502 \u2502 \u2502 \u2514\u2500\u2500sun8i-r40.dtsi \u2502 \u2502 \u2514\u2500\u2500lib //\u4e00\u4e9b\u5e93\u6587\u4ef6 \u2502 \u2502 \u2514\u2500\u2500mach-sunxi \u2502 \u2502 \u2502 \u2514\u2500\u2500board.c //board_init_f \u2502 \u2502 \u2502 \u2514\u2500\u2500dram_sunxi_dw.c //ddr\u7684\u64cd\u4f5c\uff0c\u590d\u4f4d\uff0c\u65f6\u949f\uff0c\u5ef6\u65f6\uff0codt\uff0cetc. \u2502 \u2502 \u2502 \u2514\u2500\u2500dram_helpers.c //ddr\u7684\u8bbe\u7f6e\u53ca\u8bfb\u5199\u6d4b\u8bd5 \u251c\u2500\u2500 board \u2502 \u251c\u2500\u2500sunxi \u2502 \u2502 \u2514\u2500\u2500board.c //sunxi_board_init \u5165\u53e3 \u251c\u2500\u2500 cmd //Uboot\u547d\u4ee4\u884c\u7684\u4e00\u4e9b\u547d\u4ee4 \u251c\u2500\u2500 common //\u542bspl \u251c\u2500\u2500 configs //menuconfig\u91cc\u7684\u9ed8\u8ba4\u914d\u7f6e,\u6bd4\u5982\u5404\u7c7b\u9a71\u52a8\u9002\u914d \u2502 \u251c\u2500\u2500 bananapi_m2_berry_defconfig \u251c\u2500\u2500 disk //\u786c\u76d8\u5206\u533a\u7684\u9a71\u52a8 \u251c\u2500\u2500 doc \u251c\u2500\u2500 drivers //\u5916\u8bbe\u9a71\u52a8 \u251c\u2500\u2500 dts \u251c\u2500\u2500 examples \u251c\u2500\u2500 fs //\u591a\u79cd\u6587\u4ef6\u7cfb\u7edf \u251c\u2500\u2500 include \u2502 \u251c\u2500\u2500configs \u2502 \u2502 \u2514\u2500\u2500sunxi_common.h //\u9884\u914d\u7f6e\u7684\u53c2\u6570\uff0c\u5982\u4e32\u53e3\u53f7\u7b49 \u2502 \u2502 \u2514\u2500\u2500suniv.h \u251c\u2500\u2500 lib //\u52a0\u5bc6\u538b\u7f29\u7b49\u7b97\u6cd5 \u251c\u2500\u2500 net //nfs,tftp\u7b49\u7f51\u7edc\u534f\u8bae \u251c\u2500\u2500 post \u251c\u2500\u2500 scripts 4.3 U-Boot \u914d\u7f6e \u5728Buildroot\u6839\u76ee\u5f55\u4e0b\u8f93\u5165 make uboot-menuconfig \u8fdb\u884c\u914d\u7f6e\u540e\u6267\u884c\u7f16\u8bd1 make uboot \u5373\u53ef\u4ee5\u5f97\u5230u-boot-sunxi-with-spl.bin 4.4 U-Boot \u5206\u533a \u91c7\u7528 NAND FLASH \u65b9\u6848\uff0c\u5206\u533a\u5728 MTDPARTS_DEFAULT \u4e2d\u5b9a\u4e49\uff0c\u5177\u4f53\u4f4d\u7f6e\u4e3a -> Command line interface -> Filesystem commands -> MTD partition support \u5177\u4f53\u7684\u5206\u533a\u65b9\u6848\u5982\u4e0b\u6240\u793a CONFIG_MTDPARTS_DEFAULT=\"mtdparts=sunxi_nand:128k(spl_a),768k(bootloader_a),128k(dtb_a),6m(kernel_a),-(filesystem_a)\" \u5206\u533a\u5e8f\u53f7 \u5206\u533a\u5927\u5c0f \u5206\u533a\u5c5e\u6027 \u5730\u5740\u7a7a\u95f4\u53ca\u5206\u533a\u540d\u5b57 mtd0 128KB spl 0x00000000-0x20000:\"spl\" mtd1 768KB bootloader 0x20000-0xE0000:\"bootloader\" mtd2 128KB dtb\u8bbe\u5907\u6811 0xE0000-0x100000:\"dtb\" mtd3 6MB kernel\u5185\u6838 0x100000-0x700000:\"kernel\" mtd4 \u5269\u4f59\u7a7a\u95f4 rootfs\u6587\u4ef6\u7cfb\u7edf 0x700000-end :\"roootfs\" 4.5 \u53c2\u8003\u8d44\u6599 \u5173\u4e8e\u66f4\u591a U-Boot \u914d\u7f6e\u76f8\u5173\u7684\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u94fe\u63a5 U-Boot \u914d\u7f6e U-Boot\u542f\u52a8\u8fc7\u7a0b\u6982\u8ff0","title":"4. U-Boot"},{"location":"chap4.html#u-boot","text":"","title":"U-Boot"},{"location":"chap4.html#41-u-boot","text":"U-Boot\u5c5e\u4e8eBootLoader\u7684\u4e00\u79cd\uff0c\u800cBootLoader\u662f\u5728\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u8fd0\u884c\u4e4b\u524d\u8fd0\u884c\uff0c\u4e5f\u5c31\u662f\u5f15\u5bfc\u786c\u4ef6\u4ece\u4e0a\u7535\u5230\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fc7\u7a0b\uff0cBootLoader\u5c31\u662f\u8fd9\u4e48\u4e00\u6bb5\u5c0f\u7a0b\u5e8f\u3002 \u5b8f\u89c2\u7684\u770b\uff0cBootLoader\u4e3b\u8981\u7684\u5de5\u4f5c\u5c31\u662f\u521d\u59cb\u5316\u786c\u4ef6\u8bbe\u5907\u3001\u5efa\u7acb\u5185\u5b58\u7a7a\u95f4\u7684\u6620\u5c04\u8868\uff0c\u6700\u7ec8\u521b\u5efa\u4e00\u4e2a\u9002\u5f53\u7684\u7cfb\u7edf\u8f6f\u786c\u4ef6\u73af\u5883\u3002 \u5fae\u89c2\u7684\u770bBootLoader\u7a0b\u5e8f\u4f1a\u5148\u521d\u59cb\u5316 DDR \u7b49\u5916\u8bbe\uff0c\u7136\u540e\u5c06 Linux \u5185\u6838\u4ece flash(NAND\u3001NOR FLASH\u3001SD\u3001MMC \u7b49)\u62f7\u8d1d\u5230DDR \u4e2d\uff0c\u6700\u540e\u542f\u52a8 Linux \u5185\u6838\u3002\u5f53\u7136\u4e86\uff0cBootLoader\u7684\u5b9e\u9645\u5de5\u4f5c\u8981\u590d\u6742\u7684\u591a\uff0c\u4f46\u662f\u5b83\u6700\u4e3b\u8981\u7684\u5de5\u4f5c\u5c31\u662f\u542f\u52a8 Linux \u5185\u6838\u3002","title":"4.1 U-Boot \u7b80\u4ecb"},{"location":"chap4.html#42-u-boot","text":"\u4ee5U-boot-2021.04 \u6e90\u7801\u4e3a\u4f8b . \u251c\u2500\u2500 api //\u5c01\u88c5\u4e00\u4e9b\u5e73\u53f0\u65e0\u5173\u7684\u64cd\u4f5c\uff0c\u5982\u5b57\u7b26\u4e32\u6253\u5370\uff0c\u663e\u793a\uff0c\u7f51\u7edc\uff0c\u5185\u5b58 \u251c\u2500\u2500 arch //\u4ee5\u5e73\u53f0\u67b6\u6784\u533a\u5206 \u2502 \u251c\u2500\u2500arm \u2502 \u2502 \u2514\u2500\u2500cpu \u2502 \u2502 \u2502 \u2514\u2500\u2500armv7 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500sunxi //cpu\u76f8\u5173\u7684\u4e00\u4e9b\u64cd\u4f5c\uff0c\u5982\u5b9a\u65f6\u5668\u8bfb\u53d6 \u2502 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500u-boot-spl.lds //spl\u7684\u653e\u7f6e\u65b9\u6cd5 \u2502 \u2502 \u2514\u2500\u2500dts \u2502 \u2502 \u2502 \u2514\u2500\u2500sun8i-v40-bananapi-m2-berry.dtb // a40i\u82af\u7247\u7684\u4e00\u4e9b\u914d\u7f6e \u2502 \u2502 \u2502 \u2514\u2500\u2500sun8i-r40.dtsi \u2502 \u2502 \u2514\u2500\u2500lib //\u4e00\u4e9b\u5e93\u6587\u4ef6 \u2502 \u2502 \u2514\u2500\u2500mach-sunxi \u2502 \u2502 \u2502 \u2514\u2500\u2500board.c //board_init_f \u2502 \u2502 \u2502 \u2514\u2500\u2500dram_sunxi_dw.c //ddr\u7684\u64cd\u4f5c\uff0c\u590d\u4f4d\uff0c\u65f6\u949f\uff0c\u5ef6\u65f6\uff0codt\uff0cetc. \u2502 \u2502 \u2502 \u2514\u2500\u2500dram_helpers.c //ddr\u7684\u8bbe\u7f6e\u53ca\u8bfb\u5199\u6d4b\u8bd5 \u251c\u2500\u2500 board \u2502 \u251c\u2500\u2500sunxi \u2502 \u2502 \u2514\u2500\u2500board.c //sunxi_board_init \u5165\u53e3 \u251c\u2500\u2500 cmd //Uboot\u547d\u4ee4\u884c\u7684\u4e00\u4e9b\u547d\u4ee4 \u251c\u2500\u2500 common //\u542bspl \u251c\u2500\u2500 configs //menuconfig\u91cc\u7684\u9ed8\u8ba4\u914d\u7f6e,\u6bd4\u5982\u5404\u7c7b\u9a71\u52a8\u9002\u914d \u2502 \u251c\u2500\u2500 bananapi_m2_berry_defconfig \u251c\u2500\u2500 disk //\u786c\u76d8\u5206\u533a\u7684\u9a71\u52a8 \u251c\u2500\u2500 doc \u251c\u2500\u2500 drivers //\u5916\u8bbe\u9a71\u52a8 \u251c\u2500\u2500 dts \u251c\u2500\u2500 examples \u251c\u2500\u2500 fs //\u591a\u79cd\u6587\u4ef6\u7cfb\u7edf \u251c\u2500\u2500 include \u2502 \u251c\u2500\u2500configs \u2502 \u2502 \u2514\u2500\u2500sunxi_common.h //\u9884\u914d\u7f6e\u7684\u53c2\u6570\uff0c\u5982\u4e32\u53e3\u53f7\u7b49 \u2502 \u2502 \u2514\u2500\u2500suniv.h \u251c\u2500\u2500 lib //\u52a0\u5bc6\u538b\u7f29\u7b49\u7b97\u6cd5 \u251c\u2500\u2500 net //nfs,tftp\u7b49\u7f51\u7edc\u534f\u8bae \u251c\u2500\u2500 post \u251c\u2500\u2500 scripts","title":"4.2 U-Boot \u76ee\u5f55\u7ed3\u6784"},{"location":"chap4.html#43-u-boot","text":"\u5728Buildroot\u6839\u76ee\u5f55\u4e0b\u8f93\u5165 make uboot-menuconfig \u8fdb\u884c\u914d\u7f6e\u540e\u6267\u884c\u7f16\u8bd1 make uboot \u5373\u53ef\u4ee5\u5f97\u5230u-boot-sunxi-with-spl.bin","title":"4.3 U-Boot \u914d\u7f6e"},{"location":"chap4.html#44-u-boot","text":"\u91c7\u7528 NAND FLASH \u65b9\u6848\uff0c\u5206\u533a\u5728 MTDPARTS_DEFAULT \u4e2d\u5b9a\u4e49\uff0c\u5177\u4f53\u4f4d\u7f6e\u4e3a -> Command line interface -> Filesystem commands -> MTD partition support \u5177\u4f53\u7684\u5206\u533a\u65b9\u6848\u5982\u4e0b\u6240\u793a CONFIG_MTDPARTS_DEFAULT=\"mtdparts=sunxi_nand:128k(spl_a),768k(bootloader_a),128k(dtb_a),6m(kernel_a),-(filesystem_a)\" \u5206\u533a\u5e8f\u53f7 \u5206\u533a\u5927\u5c0f \u5206\u533a\u5c5e\u6027 \u5730\u5740\u7a7a\u95f4\u53ca\u5206\u533a\u540d\u5b57 mtd0 128KB spl 0x00000000-0x20000:\"spl\" mtd1 768KB bootloader 0x20000-0xE0000:\"bootloader\" mtd2 128KB dtb\u8bbe\u5907\u6811 0xE0000-0x100000:\"dtb\" mtd3 6MB kernel\u5185\u6838 0x100000-0x700000:\"kernel\" mtd4 \u5269\u4f59\u7a7a\u95f4 rootfs\u6587\u4ef6\u7cfb\u7edf 0x700000-end :\"roootfs\"","title":"4.4 U-Boot \u5206\u533a"},{"location":"chap4.html#45","text":"\u5173\u4e8e\u66f4\u591a U-Boot \u914d\u7f6e\u76f8\u5173\u7684\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u94fe\u63a5 U-Boot \u914d\u7f6e U-Boot\u542f\u52a8\u8fc7\u7a0b\u6982\u8ff0","title":"4.5 \u53c2\u8003\u8d44\u6599"},{"location":"chap5.html","text":"Linux Kernel 5.1 Linux \u7b80\u4ecb Linux\u662f\u4e00\u79cd\u81ea\u7531\u548c\u5f00\u653e\u6e90\u7801\u7684\u7c7bUNIX\u64cd\u4f5c\u7cfb\u7edf\u3002\u8be5\u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u6838\u7531\u6797\u7eb3\u65af\u00b7\u6258\u74e6\u5179\u57281991\u5e7410\u67085\u65e5\u9996\u6b21\u53d1\u5e03\uff0c\u5728\u52a0\u4e0a\u7528\u6237\u7a7a\u95f4\u7684\u5e94\u7528\u7a0b\u5e8f\u4e4b\u540e\uff0c\u6210\u4e3aLinux\u64cd\u4f5c\u7cfb\u7edf\u3002 Linux\u4e5f\u662f\u81ea\u7531\u8f6f\u4ef6\u548c\u5f00\u653e\u6e90\u4ee3\u7801\u8f6f\u4ef6\u53d1\u5c55\u4e2d\u6700\u8457\u540d\u7684\u4f8b\u5b50\u3002\u53ea\u8981\u9075\u5faaGNU \u901a\u7528\u516c\u5171\u8bb8\u53ef\u8bc1\uff08GPL\uff09\uff0c\u4efb\u4f55\u4e2a\u4eba\u548c\u673a\u6784\u90fd\u53ef\u4ee5\u81ea\u7531\u5730\u4f7f\u7528Linux\u7684\u6240\u6709\u5e95\u5c42\u6e90\u4ee3\u7801\uff0c\u4e5f\u53ef\u4ee5\u81ea\u7531\u5730\u4fee\u6539\u548c\u518d\u53d1\u5e03\u3002\u5927\u591a\u6570Linux\u7cfb\u7edf\u8fd8\u5305\u62ec\u50cf\u63d0\u4f9bGUI\u7684X Window\u4e4b\u7c7b\u7684\u7a0b\u5e8f\u3002\u9664\u4e86\u4e00\u90e8\u5206\u4e13\u5bb6\u4e4b\u5916\uff0c\u5927\u591a\u6570\u4eba\u90fd\u662f\u76f4\u63a5\u4f7f\u7528Linux \u53d1\u884c\u7248\uff0c\u800c\u4e0d\u662f\u81ea\u5df1\u9009\u62e9\u6bcf\u4e00\u6837\u7ec4\u4ef6\u6216\u81ea\u884c\u8bbe\u7f6e. Linux\u6700\u521d\u662f\u4f5c\u4e3a\u652f\u6301\u82f1\u7279\u5c14x86\u67b6\u6784\u7684\u4e2a\u4eba\u7535\u8111\u7684\u4e00\u4e2a\u81ea\u7531\u64cd\u4f5c\u7cfb\u7edf\u3002\u76ee\u524dLinux\u5df2\u7ecf\u88ab\u79fb\u690d\u5230\u66f4\u591a\u7684\u8ba1\u7b97\u673a\u786c\u4ef6\u5e73\u53f0\uff0c\u8fdc\u8fdc\u8d85\u51fa\u5176\u4ed6\u4efb\u4f55\u64cd\u4f5c\u7cfb\u7edf\u3002Linux\u53ef\u4ee5\u8fd0\u884c\u5728\u670d\u52a1\u5668\u548c\u5176\u4ed6\u5927\u578b\u5e73\u53f0\u4e4b\u4e0a\uff0c\u5982\u5927\u578b\u8ba1\u7b97\u673a\u548c\u8d85\u7ea7\u8ba1\u7b97\u673a\u3002\u4e16\u754c\u4e0a500\u4e2a\u6700\u5feb\u7684\u8d85\u7ea7\u8ba1\u7b97\u673a\u5df2100\uff05\u8fd0\u884cLinux\u53d1\u884c\u7248\u6216\u53d8\u79cd\u3002Linux\u4e5f\u5e7f\u6cdb\u5e94\u7528\u5728\u5d4c\u5165\u5f0f\u7cfb\u7edf\u4e0a\uff0c\u5982\u624b\u673a\uff08Mobile Phone\uff09\u3001\u5e73\u677f\u7535\u8111\uff08Tablet\uff09\u3001\u8def\u7531\u5668\uff08Router\uff09\u3001\u7535\u89c6\uff08TV\uff09\u548c\u7535\u5b50\u6e38\u620f\u673a\u7b49\u3002\u5728\u79fb\u52a8\u8bbe\u5907\u4e0a\u5e7f\u6cdb\u4f7f\u7528\u7684Android\u64cd\u4f5c\u7cfb\u7edf\u5c31\u662f\u521b\u5efa\u5728Linux\u5185\u6838\u4e4b\u4e0a\u3002 5.2 Linux \u76ee\u5f55\u7ed3\u6784 \u76ee\u5f55 \u63cf\u8ff0 \u5b58\u653e\u529f\u80fd arch \u5373architecture,\u610f\u4e3a\u67b6\u6784\u7684\u610f\u601d, \u5e38\u89c1\u7684\u4e00\u4e9b\u67b6\u6784\u6709mips\u3001x86\u3001arm\u3002 \u9002\u914d\u4e00\u6b3e\u82af\u7247\u7684linux\u5185\u6838\uff0c\u9996\u5148\u9700\u8981\u77e5\u9053\u82af\u7247\u5c5e\u4e8e\u4ec0\u4e48\u67b6\u6784 dts\u3001\u5185\u5b58\u7ba1\u7406\uff0c\u7cfb\u7edf\u8c03\u7528\uff0c\u52a8\u6001\u8c03\u9891\uff0c\u4e3b\u9891\u7387\u8bbe\u7f6e\u3001\u5e93\u6587\u4ef6\u7b49 block block\uff0c\u610f\u4e3a\u5757\uff0c\u4e0e\u5757\u8bbe\u5907\u76f8\u5173\u7684\u529f\u80fd\uff0c\u5982SD\u5361\u3001iNand\u3001Nand\u3001\u786c\u76d8\u7b49\u5757\u8bbe\u5907\u76f8\u5173\u7684\u64cd\u4f5c \u5757\u8bbe\u5907\u76f8\u5173\u4ee3\u7801 crypto encryption\uff0c\u4e0e\u52a0\u5bc6\u76f8\u5173\u7684\u529f\u80fd\uff0c\u5982md5\u3001sha1\u3001 hash\u7b49 \u5404\u7c7b\u52a0\u5bc6\u7b97\u6cd5\u76f8\u5173\u7684\u529f\u80fd\u4ee3\u7801 Documentation linux\u5185\u6838\u5404\u7c7b\u673a\u5236\u76f8\u5173\u7684\u6587\u6863\uff0c\u5168\u82f1\u6587\uff0c\u53ef\u4ee5\u67e5\u9605\u5404\u7c7b\u673a\u5236\u7684\u5b9e\u73b0\u8bf4\u660e \u5b98\u65b9\u6587\u6863 drivers \u9a71\u52a8\uff0clinux\u7684\u9a71\u52a8\u4ee3\u7801\uff0c \u5982GPIO\u3001\u7f51\u7edc\u3001usb\u3001\u84dd\u7259\u7b49\u9a71\u52a8\u6e90\u7801\uff0c\u4e00\u822c\u505a\u5f00\u53d1\u90fd\u9700\u8981\u4fee\u6539\u6216\u6dfb\u52a0\u8be5\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6 \u9a71\u52a8\u6e90\u7801\u76f8\u5173 frimware \u5b58\u653e\u4e00\u4e9b\u56fa\u4ef6\u4ee3\u7801(.bin) fs \u5373files system\uff0c\u6587\u4ef6\u7cfb\u7edf\uff0c \u5982ext2-4\u3001jffs2\u3001nfs\u3001squashfs\u3001ramfs\u3001romfs\u7b49\u6587\u4ef6\u7cfb\u7edf\u7684\u5b9e\u73b0\u4ee3\u7801 \u6587\u4ef6\u7cfb\u7edf\u76f8\u5173\u6e90\u7801 include linux\u5e93\u6587\u4ef6\u7684\u5934\u6587\u4ef6\uff0c\u5982fs.h\u3001mdio.h\u3001mm.h\u7b49\uff0c include/linux\u5b58\u653e\u4e0e\u5e73\u53f0\u65e0\u5173\u7684\u529f\u80fd\u7684\u5934\u6587\u4ef6 linux\u5185\u6838\u529f\u80fd\u76f8\u5173\u7684\u5934\u6587\u4ef6 init initialization \uff0c\u521d\u59cb\u5316\u76f8\u5173\u6e90\u7801\uff0cmain.c\u4e5f\u5728\u5176\u4e2d linux\u521d\u59cb\u5316\u76f8\u5173 ipc Inter-Process Communication\uff0c\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c \u5982\u5171\u4eab\u5185\u5b58\u3001\u4fe1\u53f7\u91cf\u3001\u6d88\u606f\u961f\u5217\u7b49 \u8fdb\u7a0b\u95f4\u901a\u4fe1\u76f8\u5173\u4ee3\u7801 kernel \u5185\u6838\uff0clinux\u5185\u6838\u76f8\u5173\u7684\u529f\u80fd\u5b9e\u73b0\u6e90\u7801\uff0c\u5982panic\u3001pid\u3001module\u3001irq\u3001cpu\u76f8\u5173 \u5185\u6838\u529f\u80fd\u6e90\u7801 lib library\uff0c \u5b9e\u73b0\u4e00\u4e9b\u5e93\u529f\u80fd\uff0c\u5982decompress\u3001crc32\u3001atomic\u7b49 \u5e93\u529f\u80fd\u5b9e\u73b0\u6e90\u7801 mm memory management\uff0c\u5185\u5b58\u7ba1\u7406\u76f8\u5173\u529f\u80fd\u5b9e\u73b0 \uff0cmmap\u3001page\u3001mempool\u7b49 \u5185\u5b58\u7ba1\u7406\u76f8\u5173\u6e90\u7801 netnetwork \u7f51\u7edc\u529f\u80fd\u76f8\u5173\u7684\u6e90\u7801\uff0c\u5982tcp/ip\u3001dns\u3001ipv4/v6\u3001802.11\u3001ethernet\u7b49 \u7f51\u7edc\u534f\u8bae\u529f\u80fd samples \u4e00\u4e9blinux\u529f\u80fd\u4ee3\u7801\u4f7f\u7528\u7684\u6807\u51c6\u5b9e\u4f8b \u793a\u4f8b\u53c2\u8003\u4ee3\u7801 scripts \u4e0e\u5185\u6838\u65e0\u5173\u7684\u811a\u672c\u4ee3\u7801\uff0c\u5982\u5185\u6838\u7f16\u8bd1\u76f8\u5173\u3001menuconfig\u76f8\u5173 \u5185\u6838\u65e0\u5173\u7684\u811a\u672c security SELinux\u7684\u6a21\u5757\u3002\u5b89\u5168\u76f8\u5173 \u5b89\u5168\u76f8\u5173\u4ee3\u7801\uff0c\u5177\u4f53\u672a\u77e5 sound \u58f0\u5361\u4e0e\u58f0\u97f3\u9a71\u52a8\u76f8\u5173\u4ee3\u7801\uff0c\u5305\u542bi2c\u3001spi\u3001usb\u7b49\u63a5\u53e3 \u97f3\u9891\u529f\u80fd\u5b9e\u73b0\u4ee3\u7801 tools \u4e0ec\u7f16\u8bd1\u3001\u94fe\u63a5\u751f\u6210\u4e00\u4e2a\u5b8c\u6574\u5185\u6838\u955c\u50cf\u76f8\u5173\u7684\u5de5\u5177 \u7f16\u8bd1\u76f8\u5173 virt \u865a\u62df\u5316\u76f8\u5173\u7684\u4ee3\u7801\uff0c\u5141\u8bb8\u642d\u5efa\u865a\u62df\u673a\u73af\u5883\uff0c\u8fd0\u884c\u591a\u4e2a\u7cfb\u7edf \u865a\u62df\u5316\u76f8\u5173\u4ee3\u7801\u5b9e\u73b0 5.3 linux \u914d\u7f6e\u76f8\u5173 \u5728Buildroot\u6839\u76ee\u5f55\u4e0b\u8f93\u5165 make linux-menuconfig linux \u914d\u7f6e\u754c\u9762 5.5 \u53c2\u8003\u8d44\u6599 linux document","title":"5. Linux Kernel"},{"location":"chap5.html#linux-kernel","text":"","title":"Linux Kernel"},{"location":"chap5.html#51-linux","text":"Linux\u662f\u4e00\u79cd\u81ea\u7531\u548c\u5f00\u653e\u6e90\u7801\u7684\u7c7bUNIX\u64cd\u4f5c\u7cfb\u7edf\u3002\u8be5\u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u6838\u7531\u6797\u7eb3\u65af\u00b7\u6258\u74e6\u5179\u57281991\u5e7410\u67085\u65e5\u9996\u6b21\u53d1\u5e03\uff0c\u5728\u52a0\u4e0a\u7528\u6237\u7a7a\u95f4\u7684\u5e94\u7528\u7a0b\u5e8f\u4e4b\u540e\uff0c\u6210\u4e3aLinux\u64cd\u4f5c\u7cfb\u7edf\u3002 Linux\u4e5f\u662f\u81ea\u7531\u8f6f\u4ef6\u548c\u5f00\u653e\u6e90\u4ee3\u7801\u8f6f\u4ef6\u53d1\u5c55\u4e2d\u6700\u8457\u540d\u7684\u4f8b\u5b50\u3002\u53ea\u8981\u9075\u5faaGNU \u901a\u7528\u516c\u5171\u8bb8\u53ef\u8bc1\uff08GPL\uff09\uff0c\u4efb\u4f55\u4e2a\u4eba\u548c\u673a\u6784\u90fd\u53ef\u4ee5\u81ea\u7531\u5730\u4f7f\u7528Linux\u7684\u6240\u6709\u5e95\u5c42\u6e90\u4ee3\u7801\uff0c\u4e5f\u53ef\u4ee5\u81ea\u7531\u5730\u4fee\u6539\u548c\u518d\u53d1\u5e03\u3002\u5927\u591a\u6570Linux\u7cfb\u7edf\u8fd8\u5305\u62ec\u50cf\u63d0\u4f9bGUI\u7684X Window\u4e4b\u7c7b\u7684\u7a0b\u5e8f\u3002\u9664\u4e86\u4e00\u90e8\u5206\u4e13\u5bb6\u4e4b\u5916\uff0c\u5927\u591a\u6570\u4eba\u90fd\u662f\u76f4\u63a5\u4f7f\u7528Linux \u53d1\u884c\u7248\uff0c\u800c\u4e0d\u662f\u81ea\u5df1\u9009\u62e9\u6bcf\u4e00\u6837\u7ec4\u4ef6\u6216\u81ea\u884c\u8bbe\u7f6e. Linux\u6700\u521d\u662f\u4f5c\u4e3a\u652f\u6301\u82f1\u7279\u5c14x86\u67b6\u6784\u7684\u4e2a\u4eba\u7535\u8111\u7684\u4e00\u4e2a\u81ea\u7531\u64cd\u4f5c\u7cfb\u7edf\u3002\u76ee\u524dLinux\u5df2\u7ecf\u88ab\u79fb\u690d\u5230\u66f4\u591a\u7684\u8ba1\u7b97\u673a\u786c\u4ef6\u5e73\u53f0\uff0c\u8fdc\u8fdc\u8d85\u51fa\u5176\u4ed6\u4efb\u4f55\u64cd\u4f5c\u7cfb\u7edf\u3002Linux\u53ef\u4ee5\u8fd0\u884c\u5728\u670d\u52a1\u5668\u548c\u5176\u4ed6\u5927\u578b\u5e73\u53f0\u4e4b\u4e0a\uff0c\u5982\u5927\u578b\u8ba1\u7b97\u673a\u548c\u8d85\u7ea7\u8ba1\u7b97\u673a\u3002\u4e16\u754c\u4e0a500\u4e2a\u6700\u5feb\u7684\u8d85\u7ea7\u8ba1\u7b97\u673a\u5df2100\uff05\u8fd0\u884cLinux\u53d1\u884c\u7248\u6216\u53d8\u79cd\u3002Linux\u4e5f\u5e7f\u6cdb\u5e94\u7528\u5728\u5d4c\u5165\u5f0f\u7cfb\u7edf\u4e0a\uff0c\u5982\u624b\u673a\uff08Mobile Phone\uff09\u3001\u5e73\u677f\u7535\u8111\uff08Tablet\uff09\u3001\u8def\u7531\u5668\uff08Router\uff09\u3001\u7535\u89c6\uff08TV\uff09\u548c\u7535\u5b50\u6e38\u620f\u673a\u7b49\u3002\u5728\u79fb\u52a8\u8bbe\u5907\u4e0a\u5e7f\u6cdb\u4f7f\u7528\u7684Android\u64cd\u4f5c\u7cfb\u7edf\u5c31\u662f\u521b\u5efa\u5728Linux\u5185\u6838\u4e4b\u4e0a\u3002","title":"5.1 Linux \u7b80\u4ecb"},{"location":"chap5.html#52-linux","text":"\u76ee\u5f55 \u63cf\u8ff0 \u5b58\u653e\u529f\u80fd arch \u5373architecture,\u610f\u4e3a\u67b6\u6784\u7684\u610f\u601d, \u5e38\u89c1\u7684\u4e00\u4e9b\u67b6\u6784\u6709mips\u3001x86\u3001arm\u3002 \u9002\u914d\u4e00\u6b3e\u82af\u7247\u7684linux\u5185\u6838\uff0c\u9996\u5148\u9700\u8981\u77e5\u9053\u82af\u7247\u5c5e\u4e8e\u4ec0\u4e48\u67b6\u6784 dts\u3001\u5185\u5b58\u7ba1\u7406\uff0c\u7cfb\u7edf\u8c03\u7528\uff0c\u52a8\u6001\u8c03\u9891\uff0c\u4e3b\u9891\u7387\u8bbe\u7f6e\u3001\u5e93\u6587\u4ef6\u7b49 block block\uff0c\u610f\u4e3a\u5757\uff0c\u4e0e\u5757\u8bbe\u5907\u76f8\u5173\u7684\u529f\u80fd\uff0c\u5982SD\u5361\u3001iNand\u3001Nand\u3001\u786c\u76d8\u7b49\u5757\u8bbe\u5907\u76f8\u5173\u7684\u64cd\u4f5c \u5757\u8bbe\u5907\u76f8\u5173\u4ee3\u7801 crypto encryption\uff0c\u4e0e\u52a0\u5bc6\u76f8\u5173\u7684\u529f\u80fd\uff0c\u5982md5\u3001sha1\u3001 hash\u7b49 \u5404\u7c7b\u52a0\u5bc6\u7b97\u6cd5\u76f8\u5173\u7684\u529f\u80fd\u4ee3\u7801 Documentation linux\u5185\u6838\u5404\u7c7b\u673a\u5236\u76f8\u5173\u7684\u6587\u6863\uff0c\u5168\u82f1\u6587\uff0c\u53ef\u4ee5\u67e5\u9605\u5404\u7c7b\u673a\u5236\u7684\u5b9e\u73b0\u8bf4\u660e \u5b98\u65b9\u6587\u6863 drivers \u9a71\u52a8\uff0clinux\u7684\u9a71\u52a8\u4ee3\u7801\uff0c \u5982GPIO\u3001\u7f51\u7edc\u3001usb\u3001\u84dd\u7259\u7b49\u9a71\u52a8\u6e90\u7801\uff0c\u4e00\u822c\u505a\u5f00\u53d1\u90fd\u9700\u8981\u4fee\u6539\u6216\u6dfb\u52a0\u8be5\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6 \u9a71\u52a8\u6e90\u7801\u76f8\u5173 frimware \u5b58\u653e\u4e00\u4e9b\u56fa\u4ef6\u4ee3\u7801(.bin) fs \u5373files system\uff0c\u6587\u4ef6\u7cfb\u7edf\uff0c \u5982ext2-4\u3001jffs2\u3001nfs\u3001squashfs\u3001ramfs\u3001romfs\u7b49\u6587\u4ef6\u7cfb\u7edf\u7684\u5b9e\u73b0\u4ee3\u7801 \u6587\u4ef6\u7cfb\u7edf\u76f8\u5173\u6e90\u7801 include linux\u5e93\u6587\u4ef6\u7684\u5934\u6587\u4ef6\uff0c\u5982fs.h\u3001mdio.h\u3001mm.h\u7b49\uff0c include/linux\u5b58\u653e\u4e0e\u5e73\u53f0\u65e0\u5173\u7684\u529f\u80fd\u7684\u5934\u6587\u4ef6 linux\u5185\u6838\u529f\u80fd\u76f8\u5173\u7684\u5934\u6587\u4ef6 init initialization \uff0c\u521d\u59cb\u5316\u76f8\u5173\u6e90\u7801\uff0cmain.c\u4e5f\u5728\u5176\u4e2d linux\u521d\u59cb\u5316\u76f8\u5173 ipc Inter-Process Communication\uff0c\u8fdb\u7a0b\u95f4\u901a\u4fe1\uff0c \u5982\u5171\u4eab\u5185\u5b58\u3001\u4fe1\u53f7\u91cf\u3001\u6d88\u606f\u961f\u5217\u7b49 \u8fdb\u7a0b\u95f4\u901a\u4fe1\u76f8\u5173\u4ee3\u7801 kernel \u5185\u6838\uff0clinux\u5185\u6838\u76f8\u5173\u7684\u529f\u80fd\u5b9e\u73b0\u6e90\u7801\uff0c\u5982panic\u3001pid\u3001module\u3001irq\u3001cpu\u76f8\u5173 \u5185\u6838\u529f\u80fd\u6e90\u7801 lib library\uff0c \u5b9e\u73b0\u4e00\u4e9b\u5e93\u529f\u80fd\uff0c\u5982decompress\u3001crc32\u3001atomic\u7b49 \u5e93\u529f\u80fd\u5b9e\u73b0\u6e90\u7801 mm memory management\uff0c\u5185\u5b58\u7ba1\u7406\u76f8\u5173\u529f\u80fd\u5b9e\u73b0 \uff0cmmap\u3001page\u3001mempool\u7b49 \u5185\u5b58\u7ba1\u7406\u76f8\u5173\u6e90\u7801 netnetwork \u7f51\u7edc\u529f\u80fd\u76f8\u5173\u7684\u6e90\u7801\uff0c\u5982tcp/ip\u3001dns\u3001ipv4/v6\u3001802.11\u3001ethernet\u7b49 \u7f51\u7edc\u534f\u8bae\u529f\u80fd samples \u4e00\u4e9blinux\u529f\u80fd\u4ee3\u7801\u4f7f\u7528\u7684\u6807\u51c6\u5b9e\u4f8b \u793a\u4f8b\u53c2\u8003\u4ee3\u7801 scripts \u4e0e\u5185\u6838\u65e0\u5173\u7684\u811a\u672c\u4ee3\u7801\uff0c\u5982\u5185\u6838\u7f16\u8bd1\u76f8\u5173\u3001menuconfig\u76f8\u5173 \u5185\u6838\u65e0\u5173\u7684\u811a\u672c security SELinux\u7684\u6a21\u5757\u3002\u5b89\u5168\u76f8\u5173 \u5b89\u5168\u76f8\u5173\u4ee3\u7801\uff0c\u5177\u4f53\u672a\u77e5 sound \u58f0\u5361\u4e0e\u58f0\u97f3\u9a71\u52a8\u76f8\u5173\u4ee3\u7801\uff0c\u5305\u542bi2c\u3001spi\u3001usb\u7b49\u63a5\u53e3 \u97f3\u9891\u529f\u80fd\u5b9e\u73b0\u4ee3\u7801 tools \u4e0ec\u7f16\u8bd1\u3001\u94fe\u63a5\u751f\u6210\u4e00\u4e2a\u5b8c\u6574\u5185\u6838\u955c\u50cf\u76f8\u5173\u7684\u5de5\u5177 \u7f16\u8bd1\u76f8\u5173 virt \u865a\u62df\u5316\u76f8\u5173\u7684\u4ee3\u7801\uff0c\u5141\u8bb8\u642d\u5efa\u865a\u62df\u673a\u73af\u5883\uff0c\u8fd0\u884c\u591a\u4e2a\u7cfb\u7edf \u865a\u62df\u5316\u76f8\u5173\u4ee3\u7801\u5b9e\u73b0","title":"5.2 Linux \u76ee\u5f55\u7ed3\u6784"},{"location":"chap5.html#53-linux","text":"\u5728Buildroot\u6839\u76ee\u5f55\u4e0b\u8f93\u5165 make linux-menuconfig linux \u914d\u7f6e\u754c\u9762","title":"5.3 linux \u914d\u7f6e\u76f8\u5173"},{"location":"chap5.html#55","text":"linux document","title":"5.5 \u53c2\u8003\u8d44\u6599"},{"location":"chap6.html","text":"Rootfs \u5236\u4f5c\u6839\u6587\u4ef6\u7cfb\u7edf\u4e3b\u8981\u662f\u6839\u636e\u9700\u6c42\uff0c\u914d\u7f6eBuildroot\u4e2d Target Packages\u7684\u9009\u9879 5.1 Busybox \u5728\u5d4c\u5165\u5f0f\u7cfb\u7edf\u4e2d\u4e00\u822c\u9009\u7528Busybox\u4f5c\u4e3a\u5e38\u89c1\u5de5\u5177\u5957\u4ef6\u96c6\uff0cBusyBox \u662f\u4e00\u4e2a\u96c6\u6210\u4e86\u4e09\u767e\u591a\u4e2a\u6700\u5e38\u7528Linux\u547d\u4ee4\u548c\u5de5\u5177\u7684\u8f6f\u4ef6\u3002BusyBox \u5305\u542b\u4e86\u4e00\u4e9b\u7b80\u5355\u7684\u5de5\u5177\uff0c\u4f8b\u5982ls\u3001cat\u548cecho\u7b49\u7b49\uff0c\u8fd8\u5305\u542b\u4e86\u4e00\u4e9b\u66f4\u5927\u3001\u66f4\u590d\u6742\u7684\u5de5\u5177\uff0c\u4f8bgrep\u3001find\u3001mount\u4ee5\u53catelnet\u3002 \u6709\u4e9b\u4eba\u5c06 BusyBox \u79f0\u4e3a Linux \u5de5\u5177\u91cc\u7684\u745e\u58eb\u519b\u5200\u3002\u7b80\u5355\u7684\u8bf4BusyBox\u5c31\u597d\u50cf\u662f\u4e2a\u5927\u5de5\u5177\u7bb1\uff0c\u5b83\u96c6\u6210\u538b\u7f29\u4e86 Linux \u7684\u8bb8\u591a\u5de5\u5177\u548c\u547d\u4ee4\uff0c\u4e5f\u5305\u542b\u4e86 Linux \u7cfb\u7edf\u7684\u81ea\u5e26\u7684shell\u3002Busybox\u53ef\u4ee5\u6709\u6548\u5730\u7f29\u51cf\u5e94\u7528\u7a0b\u5e8f\u7684\u4f53\u79ef\uff0c\u52a0\u5feb\u52a0\u8f7d\u7684\u901f\u5ea6\u3002 \u5982\u679c\u9700\u8981\u914d\u7f6ebusybox\uff0c\u53ef\u4ee5\u8f93\u5165 make busybox-menuconfig \u914d\u7f6e\u597d\u540e\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u66f4\u65b0\u914d\u7f6e\u4e3abusybox\u7684\u9ed8\u8ba4\u914d\u7f6e\uff0c\u8fd9\u6837\u4e00\u65e6\u6267\u884cmake clean\u540e\uff0c\u672c\u6b21\u751f\u6210\u7684busybox\u914d\u7f6e\u6587\u4ef6\u4ecd\u7136\u53ef\u4ee5\u751f\u6548 make busybox-update-config","title":"6. Rootfs\u6839\u6587\u4ef6\u7cfb\u7edf"},{"location":"chap6.html#rootfs","text":"\u5236\u4f5c\u6839\u6587\u4ef6\u7cfb\u7edf\u4e3b\u8981\u662f\u6839\u636e\u9700\u6c42\uff0c\u914d\u7f6eBuildroot\u4e2d Target Packages\u7684\u9009\u9879","title":"Rootfs"},{"location":"chap6.html#51-busybox","text":"\u5728\u5d4c\u5165\u5f0f\u7cfb\u7edf\u4e2d\u4e00\u822c\u9009\u7528Busybox\u4f5c\u4e3a\u5e38\u89c1\u5de5\u5177\u5957\u4ef6\u96c6\uff0cBusyBox \u662f\u4e00\u4e2a\u96c6\u6210\u4e86\u4e09\u767e\u591a\u4e2a\u6700\u5e38\u7528Linux\u547d\u4ee4\u548c\u5de5\u5177\u7684\u8f6f\u4ef6\u3002BusyBox \u5305\u542b\u4e86\u4e00\u4e9b\u7b80\u5355\u7684\u5de5\u5177\uff0c\u4f8b\u5982ls\u3001cat\u548cecho\u7b49\u7b49\uff0c\u8fd8\u5305\u542b\u4e86\u4e00\u4e9b\u66f4\u5927\u3001\u66f4\u590d\u6742\u7684\u5de5\u5177\uff0c\u4f8bgrep\u3001find\u3001mount\u4ee5\u53catelnet\u3002 \u6709\u4e9b\u4eba\u5c06 BusyBox \u79f0\u4e3a Linux \u5de5\u5177\u91cc\u7684\u745e\u58eb\u519b\u5200\u3002\u7b80\u5355\u7684\u8bf4BusyBox\u5c31\u597d\u50cf\u662f\u4e2a\u5927\u5de5\u5177\u7bb1\uff0c\u5b83\u96c6\u6210\u538b\u7f29\u4e86 Linux \u7684\u8bb8\u591a\u5de5\u5177\u548c\u547d\u4ee4\uff0c\u4e5f\u5305\u542b\u4e86 Linux \u7cfb\u7edf\u7684\u81ea\u5e26\u7684shell\u3002Busybox\u53ef\u4ee5\u6709\u6548\u5730\u7f29\u51cf\u5e94\u7528\u7a0b\u5e8f\u7684\u4f53\u79ef\uff0c\u52a0\u5feb\u52a0\u8f7d\u7684\u901f\u5ea6\u3002 \u5982\u679c\u9700\u8981\u914d\u7f6ebusybox\uff0c\u53ef\u4ee5\u8f93\u5165 make busybox-menuconfig \u914d\u7f6e\u597d\u540e\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u66f4\u65b0\u914d\u7f6e\u4e3abusybox\u7684\u9ed8\u8ba4\u914d\u7f6e\uff0c\u8fd9\u6837\u4e00\u65e6\u6267\u884cmake clean\u540e\uff0c\u672c\u6b21\u751f\u6210\u7684busybox\u914d\u7f6e\u6587\u4ef6\u4ecd\u7136\u53ef\u4ee5\u751f\u6548 make busybox-update-config","title":"5.1 Busybox"},{"location":"chap7.html","text":"7 \u5e94\u7528\u5f00\u53d1 7.1 QT5 \u5f00\u53d1 7.1.1 \u5b89\u88c5QT CREATOR \u672c\u6b21\u5b89\u88c5\u7684QT CREATOR \u4e3aapt\u6e90\u4e0a\u7684 sudo apt-get install qtcreator 7.1.2 \u914d\u7f6eARM \u5e73\u53f0\u7684Qt Creator Kits \u5b89\u88c5\u6210\u529f\u540e\u6253\u5f00QT CREATOR, \u6253\u5f00Qt Creator \u754c\u9762\uff0c\u627e\u5230Tools \uff08\u5de5\u5177\uff09\u300bOptions \uff08\u9009\u9879) \u5207\u6362\u5230Qt Versions\uff0c \u6dfb\u52a0qmake \u5207\u6362\u5230Compilers,\u6dfb\u52a0\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177 \u5207\u6362\u5230Debuggers,\u6dfb\u52a0\u8c03\u8bd5\u5de5\u5177 \u6700\u540e\u5207\u6362\u5230Kits\uff0c\u6dfb\u52a0\u5982\u4e0b\u6307\u51fa\u7684\u9009\u9879\uff0c\u5373\u53ef\u5b8c\u6210ARM \u5e73\u53f0\u7684Qt Creator Kits\u914d\u7f6e 7.1.3 \u9a8c\u8bc1ARM \u5e73\u53f0\u7684Qt \u7f16\u8bd1 \u6253\u5f00QT\u6e90\u7801\u4e2d\u81ea\u5e26\u7684examples\u6587\u4ef6\u5939\u4e2d\u7684examples.pro \u9879\u76ee\u6587\u4ef6 \u9009\u62e9\u4e4b\u524d\u6dfb\u52a0\u7684ARM Kit \u8fdb\u5165\u5de5\u7a0b\u754c\u9762\u540e\u70b9\u51fbbuild all \u5373\u53ef\u7f16\u8bd1\u5de5\u7a0b\u5e76\u751f\u6210 ARM LINUX \u5e73\u53f0\u7684 ELF \u53ef\u6267\u884c\u6587\u4ef6 7.2 \u5e94\u7528\u6253\u5305 dpkg \u662f\"Debian Packager \"\u7684\u7b80\u5199\u3002\u4e3a \"Debian\" \u4e13\u95e8\u5f00\u53d1\u7684\u5957\u4ef6\u7ba1\u7406\u7cfb\u7edf\uff0c\u65b9\u4fbf\u8f6f\u4ef6\u7684\u5b89\u88c5\u3001\u66f4\u65b0\u53ca\u79fb\u9664\u3002\u6240\u6709\u6e90\u81ea\"Debian\"\u7684\"Linux \"\u53d1\u884c\u7248\u90fd\u4f7f\u7528 \"dpkg\"\uff0c\u4f8b\u5982 \"Ubuntu\"\u3001\"Knoppix \"\u7b49\u3002 dpkg\u662fDebian\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668\u7684\u57fa\u7840\uff0c\u5b83\u88ab\u4f0a\u6069\u00b7\u9ed8\u591a\u514b\u521b\u5efa\u4e8e1993\u5e74\u3002dpkg\u4e0eRPM\u5341\u5206\u76f8\u4f3c\uff0c\u540c\u6837\u88ab\u7528\u4e8e\u5b89\u88c5\u3001\u5378\u8f7d\u548c\u4f9b\u7ed9.deb\u8f6f\u4ef6\u5305\u76f8\u5173\u7684\u4fe1\u606f\u3002 dpkg\u672c\u8eab\u662f\u4e00\u4e2a\u5e95\u5c42\u7684\u5de5\u5177\u3002\u4e0a\u5c42\u7684\u5de5\u5177\uff0c\u5982APT\uff0c\u88ab\u7528\u4e8e\u4ece\u8fdc\u7a0b\u83b7\u53d6\u8f6f\u4ef6\u5305\u4ee5\u53ca\u5904\u7406\u590d\u6742\u7684\u8f6f\u4ef6\u5305\u5173\u7cfb\u3002 \"dpkg\"\u662f\"Debian Package\"\u7684\u7b80\u5199\u3002 7.2.1 deb\u5305\u7684\u76ee\u5f55\u7ed3\u6784 deb\u5305\u672c\u8eab\u6709\u4e09\u90e8\u5206\u7ec4\u6210 \u7ec4\u6210 \u8be6\u7ec6 \u6570\u636e\u5305 \u5305\u542b\u5b9e\u9645\u5b89\u88c5\u7684\u7a0b\u5e8f\u6570\u636e\uff0c\u6587\u4ef6\u540d\u4e3a\u201cdata.tar.XXX\u201d \u5b89\u88c5\u4fe1\u606f\u53ca\u63a7\u5236\u5305 \u5305\u542bdeb\u7684\u5b89\u88c5\u8bf4\u660e\uff0c\u6807\u8bc6\uff0c\u811a\u672c\u7b49\uff0c\u6587\u4ef6\u540d\u4e3a\u201ccontrol.tar.gz\u201d \u4e8c\u8fdb\u5236\u6570\u636e \u5305\u542b\u6587\u4ef6\u5934\u7b49\u4fe1\u606f\uff0c\u9700\u8981\u7279\u6b8a\u8f6f\u4ef6\u624d\u80fd\u67e5\u770b deb\u5305\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\u6240\u793a |----DEBIAN |-------control |-------postinst(postinstallation) |-------postrm(postremove) |-------preinst(preinstallation) |-------prerm(preremove) |-------copyright(\u7248\u6743) |-------changlog(\u4fee\u8ba2\u8bb0\u5f55) |-------conffiles |----usr |----... control\u6587\u4ef6 \u4e3b\u8981\u63cf\u8ff0\u8f6f\u4ef6\u5305\u7684\u540d\u79f0\uff08Package\uff09\uff0c\u7248\u672c\uff08Version\uff09\uff0cInstalled-Size\uff08\u5927\u5c0f\uff09\uff0cMaintainer\uff08\u6253\u5305\u4eba\u548c\u8054\u7cfb\u65b9\u5f0f\uff09\u4ee5\u53ca\u63cf\u8ff0\uff08Description\uff09\u7b49\uff0c\u662fdeb\u5305\u5fc5\u987b\u5177\u5907\u7684\u63cf\u8ff0\u6027\u6587\u4ef6\uff0c\u4ee5\u4fbf\u4e8e\u8f6f\u4ef6\u7684\u5b89\u88c5\u7ba1\u7406\u548c\u7d22\u5f15\u3002 \u5b57\u6bb5 \u7528\u9014 \u4f8b\u5b50/\u5176\u4ed6 Package \u7a0b\u5e8f\u540d\u79f0 \u4e2d\u95f4\u4e0d\u80fd\u6709\u7a7a\u683c Version \u8f6f\u4ef6\u7248\u672c Description \u7a0b\u5e8f\u8bf4\u660e Section \u8f6f\u4ef6\u7c7b\u522b utils, net, mail, text, x11 Priority \u8f6f\u4ef6\u5bf9\u4e8e\u7cfb\u7edf\u7684\u91cd\u8981\u7a0b\u5ea6 required, standard, optional, extra\u7b49\uff1b Essential \u662f\u5426\u662f\u7cfb\u7edf\u6700\u57fa\u672c\u7684\u8f6f\u4ef6\u5305 yes/no\uff0c\u82e5\u4e3ayes,\u5219\u4e0d\u5141\u8bb8\u5378\u8f7d\uff08\u9664\u975e\u5f3a\u5236\u6027\u5378\u8f7d\uff09 Architecture \u8f6f\u4ef6\u6240\u652f\u6301\u7684\u5e73\u53f0\u67b6\u6784 i386, amd64, m68k, sparc, alpha, powerpc\u7b49 Source \u8f6f\u4ef6\u5305\u7684\u6e90\u4ee3\u7801\u540d\u79f0 Depends \u8f6f\u4ef6\u6240\u4f9d\u8d56\u7684\u5176\u4ed6\u8f6f\u4ef6\u5305\u548c\u5e93\u6587\u4ef6 \u82e5\u4f9d\u8d56\u591a\u4e2a\u8f6f\u4ef6\u5305\u548c\u5e93\u6587\u4ef6\uff0c\u91c7\u7528\u9017\u53f7\u9694\u5f00 Pre-Depends \u8f6f\u4ef6\u5b89\u88c5\u524d\u5fc5\u987b\u5b89\u88c5\u3001\u914d\u7f6e\u4f9d\u8d56\u6027\u7684\u8f6f\u4ef6\u5305\u548c\u5e93\u6587\u4ef6 Recommends \u63a8\u8350\u5b89\u88c5\u7684\u5176\u4ed6\u8f6f\u4ef6\u5305\u548c\u5e93\u6587\u4ef6 Suggests \u5efa\u8bae\u5b89\u88c5\u7684\u5176\u4ed6\u8f6f\u4ef6\u5305\u548c\u5e93\u6587\u4ef6 preinst\u6587\u4ef6 \u5728Deb\u5305\u6587\u4ef6\u89e3\u5305\u4e4b\u524d\uff08\u5373\u8f6f\u4ef6\u5b89\u88c5\u524d\uff09\uff0c\u5c06\u4f1a\u8fd0\u884c\u8be5\u811a\u672c\u3002\u53ef\u4ee5\u505c\u6b62\u4f5c\u7528\u4e8e\u5f85\u5347\u7ea7\u8f6f\u4ef6\u5305\u7684\u670d\u52a1\uff0c\u76f4\u5230\u8f6f\u4ef6\u5305\u5b89\u88c5\u6216\u5347\u7ea7\u5b8c\u6210\u3002 postinst\u6587\u4ef6 \u8d1f\u8d23\u5b8c\u6210\u5b89\u88c5\u5305\u65f6\u7684\u914d\u7f6e\u5de5\u4f5c\u3002\u5982\u65b0\u5b89\u88c5\u6216\u5347\u7ea7\u7684\u8f6f\u4ef6\u91cd\u542f\u670d\u52a1\u3002\u8f6f\u4ef6\u5b89\u88c5\u5b8c\u540e\uff0c\u6267\u884c\u8be5Shell\u811a\u672c\uff0c\u4e00\u822c\u7528\u6765\u914d\u7f6e\u8f6f\u4ef6\u6267\u884c\u73af\u5883\uff0c\u5fc5\u987b\u4ee5\u201c#!/bin/sh\u201d\u4e3a\u9996\u884c\u3002 prerm \u6587\u4ef6 \u8be5\u811a\u672c\u8d1f\u8d23\u505c\u6b62\u4e0e\u8f6f\u4ef6\u5305\u76f8\u5173\u8054\u7684daemon\u670d\u52a1\u3002\u5b83\u5728\u5220\u9664\u8f6f\u4ef6\u5305\u5173\u8054\u6587\u4ef6\u4e4b\u524d\u6267\u884c\u3002 postrm\u6587\u4ef6 \u8d1f\u8d23\u4fee\u6539\u8f6f\u4ef6\u5305\u94fe\u63a5\u6216\u6587\u4ef6\u5173\u8054\uff0c\u6216\u5220\u9664\u7531\u5b83\u521b\u5efa\u7684\u6587\u4ef6\u3002\u8f6f\u4ef6\u5378\u8f7d\u540e\uff0c\u6267\u884c\u8be5Shell\u811a\u672c\uff0c\u4e00\u822c\u4f5c\u4e3a\u6e05\u7406\u6536\u5c3e\u5de5\u4f5c\uff0c\u5fc5\u987b\u4ee5\u201c#!/bin/sh\u201d\u4e3a\u9996\u884c 7.2.2 \u5236\u4f5cdeb\u5305\u6d41\u7a0b \u65b0\u5efa\u6587\u4ef6\u5939\uff0c\u5047\u8bbe\u540d\u5b57\u4e3amydeb \u5728mydeb\u5185\u65b0\u5efa\u4e00\u4e2aDEBIAN\u6587\u4ef6\u5939\uff0c\u6b64\u6587\u4ef6\u5939\u5185\u5b58\u653e\u63a7\u5236\u4fe1\u606f \u5728DEBIAN\u91cc\u65b0\u5efa\u4e00\u4e2a\u6587\u672c\u6587\u6863, \u540d\u4e3acontrol, \u7f16\u7801\u4e3autf-8, \u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a Package: MagicWork Version: 4.0.0 Architecture: arm Section: utils Priority: optional Maintainer: Co-Trust Homepage: http://www.co-trust.com. \u6ce8\u610f\u7248\u672c\u53f7Version\u9700\u8981\u6839\u636e\u8f6f\u4ef6\u66f4\u65b0\u5347\u7ea7\u505a\u4fee\u6539 \u7136\u540e\u6211\u4eec\u521b\u5efa\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u5305\u5b89\u88c5\u5b8c\u6210\u540e\u7684\u8def\u5f84\u4fe1\u606f\u653e\u7f6e\u5728DEBIAN\u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\uff0c\u4e5f\u5c31\u662f\u628a\u5f53\u524d\u7684\u76ee\u5f55\u5f53\u6210\u6839(\u201c/\u201d)\u76ee\u5f55,\u5236\u4f5c\u5b8c\u6210\u540e\u5b89\u88c5\u65f6\uff0c\u5f53\u524d\u76ee\u5f55\u4e0b\u9664\u4e86DEBIAN\u76ee\u5f55\u7684\u5176\u4ed6\u76ee\u5f55\u90fd\u4f1a\u88ab\u9ed8\u8ba4\u5b89\u88c5\u5230\u7cfb\u7edf\u7684\u201c/\u201d\u76ee\u5f55\u4e0b\u3002 . \u251c\u2500\u2500 DEBIAN \u2502 \u2514\u2500\u2500 control \u2514\u2500\u2500 usr \u251c\u2500\u2500 bin \u2502 \u251c\u2500\u2500 MagicWork \u2502 \u2514\u2500\u2500 NightWatchMan \u2514\u2500\u2500 lib \u251c\u2500\u2500 libHMIDevice.so -> libHMIDevice.so.1.0.0 \u251c\u2500\u2500 libHMIDevice.so.1 -> libHMIDevice.so.1.0.0 \u251c\u2500\u2500 libHMIDevice.so.1.0 -> libHMIDevice.so.1.0.0 \u251c\u2500\u2500 libHMIDevice.so.1.0.0 \u251c\u2500\u2500 libHMIService.so -> libHMIService.so.1.0.0 \u251c\u2500\u2500 libHMIService.so.1 -> libHMIService.so.1.0.0 \u251c\u2500\u2500 libHMIService.so.1.0 -> libHMIService.so.1.0.0 \u251c\u2500\u2500 libHMIService.so.1.0.0 \u251c\u2500\u2500 libkwmf.a \u251c\u2500\u2500 libprinter.so -> libprinter.so.1.0.0 \u251c\u2500\u2500 libprinter.so.1 -> libprinter.so.1.0.0 \u251c\u2500\u2500 libprinter.so.1.0 -> libprinter.so.1.0.0 \u251c\u2500\u2500 libprinter.so.1.0.0 \u251c\u2500\u2500 libWindingMachineModule.so -> libWindingMachineModule.so.1.0.0 \u251c\u2500\u2500 libWindingMachineModule.so.1 -> libWindingMachineModule.so.1.0.0 \u251c\u2500\u2500 libWindingMachineModule.so.1.0 -> libWindingMachineModule.so.1.0.0 \u2514\u2500\u2500 libWindingMachineModule.so.1.0.0 \u5f53\u653e\u7f6e\u6587\u4ef6\u5b8c\u6210\u540e\uff0c\u4f7f\u7528dpkg\u8fdb\u884c\u6253\u5305\u751f\u6210deb\u683c\u5f0f\u7684\u5b89\u88c5\u5305 dpkg -b mydeb/ MagicWork.deb 7.2.3 dpkg \u5e38\u7528\u547d\u4ee4 \u6253\u5305 dpkg -b . xxx \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u5c06\u8981\u6253\u5305\u7684\u76ee\u5f55\u540d\uff08.\u8868\u793a\u5f53\u524d\u76ee\u5f55\uff09\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u751f\u6210\u5305\u7684\u540d\u79f0 dpkg -b . xxx.deb \u5b89\u88c5\uff08\u89e3\u5305\u5e76\u914d\u7f6e\uff09 dpkg -i|--install <.deb file name> dpkg -i xxx.deb \u5378\u8f7d dpkg -r|--remove \uff0c\u5220\u9664\u5305\uff0c\u4f46\u4fdd\u7559\u914d\u7f6e\u6587\u4ef6 dpkg -r xxx","title":"7. \u5e94\u7528\u5f00\u53d1"},{"location":"chap7.html#7","text":"","title":"7 \u5e94\u7528\u5f00\u53d1"},{"location":"chap7.html#71-qt5","text":"","title":"7.1 QT5 \u5f00\u53d1"},{"location":"chap7.html#711-qt-creator","text":"\u672c\u6b21\u5b89\u88c5\u7684QT CREATOR \u4e3aapt\u6e90\u4e0a\u7684 sudo apt-get install qtcreator","title":"7.1.1 \u5b89\u88c5QT CREATOR"},{"location":"chap7.html#712-arm-qt-creator-kits","text":"\u5b89\u88c5\u6210\u529f\u540e\u6253\u5f00QT CREATOR, \u6253\u5f00Qt Creator \u754c\u9762\uff0c\u627e\u5230Tools \uff08\u5de5\u5177\uff09\u300bOptions \uff08\u9009\u9879) \u5207\u6362\u5230Qt Versions\uff0c \u6dfb\u52a0qmake \u5207\u6362\u5230Compilers,\u6dfb\u52a0\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177 \u5207\u6362\u5230Debuggers,\u6dfb\u52a0\u8c03\u8bd5\u5de5\u5177 \u6700\u540e\u5207\u6362\u5230Kits\uff0c\u6dfb\u52a0\u5982\u4e0b\u6307\u51fa\u7684\u9009\u9879\uff0c\u5373\u53ef\u5b8c\u6210ARM \u5e73\u53f0\u7684Qt Creator Kits\u914d\u7f6e","title":"7.1.2 \u914d\u7f6eARM \u5e73\u53f0\u7684Qt Creator Kits"},{"location":"chap7.html#713-arm-qt","text":"\u6253\u5f00QT\u6e90\u7801\u4e2d\u81ea\u5e26\u7684examples\u6587\u4ef6\u5939\u4e2d\u7684examples.pro \u9879\u76ee\u6587\u4ef6 \u9009\u62e9\u4e4b\u524d\u6dfb\u52a0\u7684ARM Kit \u8fdb\u5165\u5de5\u7a0b\u754c\u9762\u540e\u70b9\u51fbbuild all \u5373\u53ef\u7f16\u8bd1\u5de5\u7a0b\u5e76\u751f\u6210 ARM LINUX \u5e73\u53f0\u7684 ELF \u53ef\u6267\u884c\u6587\u4ef6","title":"7.1.3 \u9a8c\u8bc1ARM \u5e73\u53f0\u7684Qt \u7f16\u8bd1"},{"location":"chap7.html#72","text":"dpkg \u662f\"Debian Packager \"\u7684\u7b80\u5199\u3002\u4e3a \"Debian\" \u4e13\u95e8\u5f00\u53d1\u7684\u5957\u4ef6\u7ba1\u7406\u7cfb\u7edf\uff0c\u65b9\u4fbf\u8f6f\u4ef6\u7684\u5b89\u88c5\u3001\u66f4\u65b0\u53ca\u79fb\u9664\u3002\u6240\u6709\u6e90\u81ea\"Debian\"\u7684\"Linux \"\u53d1\u884c\u7248\u90fd\u4f7f\u7528 \"dpkg\"\uff0c\u4f8b\u5982 \"Ubuntu\"\u3001\"Knoppix \"\u7b49\u3002 dpkg\u662fDebian\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668\u7684\u57fa\u7840\uff0c\u5b83\u88ab\u4f0a\u6069\u00b7\u9ed8\u591a\u514b\u521b\u5efa\u4e8e1993\u5e74\u3002dpkg\u4e0eRPM\u5341\u5206\u76f8\u4f3c\uff0c\u540c\u6837\u88ab\u7528\u4e8e\u5b89\u88c5\u3001\u5378\u8f7d\u548c\u4f9b\u7ed9.deb\u8f6f\u4ef6\u5305\u76f8\u5173\u7684\u4fe1\u606f\u3002 dpkg\u672c\u8eab\u662f\u4e00\u4e2a\u5e95\u5c42\u7684\u5de5\u5177\u3002\u4e0a\u5c42\u7684\u5de5\u5177\uff0c\u5982APT\uff0c\u88ab\u7528\u4e8e\u4ece\u8fdc\u7a0b\u83b7\u53d6\u8f6f\u4ef6\u5305\u4ee5\u53ca\u5904\u7406\u590d\u6742\u7684\u8f6f\u4ef6\u5305\u5173\u7cfb\u3002 \"dpkg\"\u662f\"Debian Package\"\u7684\u7b80\u5199\u3002","title":"7.2 \u5e94\u7528\u6253\u5305"},{"location":"chap7.html#721-deb","text":"deb\u5305\u672c\u8eab\u6709\u4e09\u90e8\u5206\u7ec4\u6210 \u7ec4\u6210 \u8be6\u7ec6 \u6570\u636e\u5305 \u5305\u542b\u5b9e\u9645\u5b89\u88c5\u7684\u7a0b\u5e8f\u6570\u636e\uff0c\u6587\u4ef6\u540d\u4e3a\u201cdata.tar.XXX\u201d \u5b89\u88c5\u4fe1\u606f\u53ca\u63a7\u5236\u5305 \u5305\u542bdeb\u7684\u5b89\u88c5\u8bf4\u660e\uff0c\u6807\u8bc6\uff0c\u811a\u672c\u7b49\uff0c\u6587\u4ef6\u540d\u4e3a\u201ccontrol.tar.gz\u201d \u4e8c\u8fdb\u5236\u6570\u636e \u5305\u542b\u6587\u4ef6\u5934\u7b49\u4fe1\u606f\uff0c\u9700\u8981\u7279\u6b8a\u8f6f\u4ef6\u624d\u80fd\u67e5\u770b deb\u5305\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\u6240\u793a |----DEBIAN |-------control |-------postinst(postinstallation) |-------postrm(postremove) |-------preinst(preinstallation) |-------prerm(preremove) |-------copyright(\u7248\u6743) |-------changlog(\u4fee\u8ba2\u8bb0\u5f55) |-------conffiles |----usr |----... control\u6587\u4ef6 \u4e3b\u8981\u63cf\u8ff0\u8f6f\u4ef6\u5305\u7684\u540d\u79f0\uff08Package\uff09\uff0c\u7248\u672c\uff08Version\uff09\uff0cInstalled-Size\uff08\u5927\u5c0f\uff09\uff0cMaintainer\uff08\u6253\u5305\u4eba\u548c\u8054\u7cfb\u65b9\u5f0f\uff09\u4ee5\u53ca\u63cf\u8ff0\uff08Description\uff09\u7b49\uff0c\u662fdeb\u5305\u5fc5\u987b\u5177\u5907\u7684\u63cf\u8ff0\u6027\u6587\u4ef6\uff0c\u4ee5\u4fbf\u4e8e\u8f6f\u4ef6\u7684\u5b89\u88c5\u7ba1\u7406\u548c\u7d22\u5f15\u3002 \u5b57\u6bb5 \u7528\u9014 \u4f8b\u5b50/\u5176\u4ed6 Package \u7a0b\u5e8f\u540d\u79f0 \u4e2d\u95f4\u4e0d\u80fd\u6709\u7a7a\u683c Version \u8f6f\u4ef6\u7248\u672c Description \u7a0b\u5e8f\u8bf4\u660e Section \u8f6f\u4ef6\u7c7b\u522b utils, net, mail, text, x11 Priority \u8f6f\u4ef6\u5bf9\u4e8e\u7cfb\u7edf\u7684\u91cd\u8981\u7a0b\u5ea6 required, standard, optional, extra\u7b49\uff1b Essential \u662f\u5426\u662f\u7cfb\u7edf\u6700\u57fa\u672c\u7684\u8f6f\u4ef6\u5305 yes/no\uff0c\u82e5\u4e3ayes,\u5219\u4e0d\u5141\u8bb8\u5378\u8f7d\uff08\u9664\u975e\u5f3a\u5236\u6027\u5378\u8f7d\uff09 Architecture \u8f6f\u4ef6\u6240\u652f\u6301\u7684\u5e73\u53f0\u67b6\u6784 i386, amd64, m68k, sparc, alpha, powerpc\u7b49 Source \u8f6f\u4ef6\u5305\u7684\u6e90\u4ee3\u7801\u540d\u79f0 Depends \u8f6f\u4ef6\u6240\u4f9d\u8d56\u7684\u5176\u4ed6\u8f6f\u4ef6\u5305\u548c\u5e93\u6587\u4ef6 \u82e5\u4f9d\u8d56\u591a\u4e2a\u8f6f\u4ef6\u5305\u548c\u5e93\u6587\u4ef6\uff0c\u91c7\u7528\u9017\u53f7\u9694\u5f00 Pre-Depends \u8f6f\u4ef6\u5b89\u88c5\u524d\u5fc5\u987b\u5b89\u88c5\u3001\u914d\u7f6e\u4f9d\u8d56\u6027\u7684\u8f6f\u4ef6\u5305\u548c\u5e93\u6587\u4ef6 Recommends \u63a8\u8350\u5b89\u88c5\u7684\u5176\u4ed6\u8f6f\u4ef6\u5305\u548c\u5e93\u6587\u4ef6 Suggests \u5efa\u8bae\u5b89\u88c5\u7684\u5176\u4ed6\u8f6f\u4ef6\u5305\u548c\u5e93\u6587\u4ef6 preinst\u6587\u4ef6 \u5728Deb\u5305\u6587\u4ef6\u89e3\u5305\u4e4b\u524d\uff08\u5373\u8f6f\u4ef6\u5b89\u88c5\u524d\uff09\uff0c\u5c06\u4f1a\u8fd0\u884c\u8be5\u811a\u672c\u3002\u53ef\u4ee5\u505c\u6b62\u4f5c\u7528\u4e8e\u5f85\u5347\u7ea7\u8f6f\u4ef6\u5305\u7684\u670d\u52a1\uff0c\u76f4\u5230\u8f6f\u4ef6\u5305\u5b89\u88c5\u6216\u5347\u7ea7\u5b8c\u6210\u3002 postinst\u6587\u4ef6 \u8d1f\u8d23\u5b8c\u6210\u5b89\u88c5\u5305\u65f6\u7684\u914d\u7f6e\u5de5\u4f5c\u3002\u5982\u65b0\u5b89\u88c5\u6216\u5347\u7ea7\u7684\u8f6f\u4ef6\u91cd\u542f\u670d\u52a1\u3002\u8f6f\u4ef6\u5b89\u88c5\u5b8c\u540e\uff0c\u6267\u884c\u8be5Shell\u811a\u672c\uff0c\u4e00\u822c\u7528\u6765\u914d\u7f6e\u8f6f\u4ef6\u6267\u884c\u73af\u5883\uff0c\u5fc5\u987b\u4ee5\u201c#!/bin/sh\u201d\u4e3a\u9996\u884c\u3002 prerm \u6587\u4ef6 \u8be5\u811a\u672c\u8d1f\u8d23\u505c\u6b62\u4e0e\u8f6f\u4ef6\u5305\u76f8\u5173\u8054\u7684daemon\u670d\u52a1\u3002\u5b83\u5728\u5220\u9664\u8f6f\u4ef6\u5305\u5173\u8054\u6587\u4ef6\u4e4b\u524d\u6267\u884c\u3002 postrm\u6587\u4ef6 \u8d1f\u8d23\u4fee\u6539\u8f6f\u4ef6\u5305\u94fe\u63a5\u6216\u6587\u4ef6\u5173\u8054\uff0c\u6216\u5220\u9664\u7531\u5b83\u521b\u5efa\u7684\u6587\u4ef6\u3002\u8f6f\u4ef6\u5378\u8f7d\u540e\uff0c\u6267\u884c\u8be5Shell\u811a\u672c\uff0c\u4e00\u822c\u4f5c\u4e3a\u6e05\u7406\u6536\u5c3e\u5de5\u4f5c\uff0c\u5fc5\u987b\u4ee5\u201c#!/bin/sh\u201d\u4e3a\u9996\u884c","title":"7.2.1 deb\u5305\u7684\u76ee\u5f55\u7ed3\u6784"},{"location":"chap7.html#722-deb","text":"\u65b0\u5efa\u6587\u4ef6\u5939\uff0c\u5047\u8bbe\u540d\u5b57\u4e3amydeb \u5728mydeb\u5185\u65b0\u5efa\u4e00\u4e2aDEBIAN\u6587\u4ef6\u5939\uff0c\u6b64\u6587\u4ef6\u5939\u5185\u5b58\u653e\u63a7\u5236\u4fe1\u606f \u5728DEBIAN\u91cc\u65b0\u5efa\u4e00\u4e2a\u6587\u672c\u6587\u6863, \u540d\u4e3acontrol, \u7f16\u7801\u4e3autf-8, \u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a Package: MagicWork Version: 4.0.0 Architecture: arm Section: utils Priority: optional Maintainer: Co-Trust Homepage: http://www.co-trust.com. \u6ce8\u610f\u7248\u672c\u53f7Version\u9700\u8981\u6839\u636e\u8f6f\u4ef6\u66f4\u65b0\u5347\u7ea7\u505a\u4fee\u6539 \u7136\u540e\u6211\u4eec\u521b\u5efa\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u5305\u5b89\u88c5\u5b8c\u6210\u540e\u7684\u8def\u5f84\u4fe1\u606f\u653e\u7f6e\u5728DEBIAN\u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\uff0c\u4e5f\u5c31\u662f\u628a\u5f53\u524d\u7684\u76ee\u5f55\u5f53\u6210\u6839(\u201c/\u201d)\u76ee\u5f55,\u5236\u4f5c\u5b8c\u6210\u540e\u5b89\u88c5\u65f6\uff0c\u5f53\u524d\u76ee\u5f55\u4e0b\u9664\u4e86DEBIAN\u76ee\u5f55\u7684\u5176\u4ed6\u76ee\u5f55\u90fd\u4f1a\u88ab\u9ed8\u8ba4\u5b89\u88c5\u5230\u7cfb\u7edf\u7684\u201c/\u201d\u76ee\u5f55\u4e0b\u3002 . \u251c\u2500\u2500 DEBIAN \u2502 \u2514\u2500\u2500 control \u2514\u2500\u2500 usr \u251c\u2500\u2500 bin \u2502 \u251c\u2500\u2500 MagicWork \u2502 \u2514\u2500\u2500 NightWatchMan \u2514\u2500\u2500 lib \u251c\u2500\u2500 libHMIDevice.so -> libHMIDevice.so.1.0.0 \u251c\u2500\u2500 libHMIDevice.so.1 -> libHMIDevice.so.1.0.0 \u251c\u2500\u2500 libHMIDevice.so.1.0 -> libHMIDevice.so.1.0.0 \u251c\u2500\u2500 libHMIDevice.so.1.0.0 \u251c\u2500\u2500 libHMIService.so -> libHMIService.so.1.0.0 \u251c\u2500\u2500 libHMIService.so.1 -> libHMIService.so.1.0.0 \u251c\u2500\u2500 libHMIService.so.1.0 -> libHMIService.so.1.0.0 \u251c\u2500\u2500 libHMIService.so.1.0.0 \u251c\u2500\u2500 libkwmf.a \u251c\u2500\u2500 libprinter.so -> libprinter.so.1.0.0 \u251c\u2500\u2500 libprinter.so.1 -> libprinter.so.1.0.0 \u251c\u2500\u2500 libprinter.so.1.0 -> libprinter.so.1.0.0 \u251c\u2500\u2500 libprinter.so.1.0.0 \u251c\u2500\u2500 libWindingMachineModule.so -> libWindingMachineModule.so.1.0.0 \u251c\u2500\u2500 libWindingMachineModule.so.1 -> libWindingMachineModule.so.1.0.0 \u251c\u2500\u2500 libWindingMachineModule.so.1.0 -> libWindingMachineModule.so.1.0.0 \u2514\u2500\u2500 libWindingMachineModule.so.1.0.0 \u5f53\u653e\u7f6e\u6587\u4ef6\u5b8c\u6210\u540e\uff0c\u4f7f\u7528dpkg\u8fdb\u884c\u6253\u5305\u751f\u6210deb\u683c\u5f0f\u7684\u5b89\u88c5\u5305 dpkg -b mydeb/ MagicWork.deb","title":"7.2.2 \u5236\u4f5cdeb\u5305\u6d41\u7a0b"},{"location":"chap7.html#723-dpkg","text":"\u6253\u5305 dpkg -b . xxx \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u5c06\u8981\u6253\u5305\u7684\u76ee\u5f55\u540d\uff08.\u8868\u793a\u5f53\u524d\u76ee\u5f55\uff09\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u751f\u6210\u5305\u7684\u540d\u79f0 dpkg -b . xxx.deb \u5b89\u88c5\uff08\u89e3\u5305\u5e76\u914d\u7f6e\uff09 dpkg -i|--install <.deb file name> dpkg -i xxx.deb \u5378\u8f7d dpkg -r|--remove \uff0c\u5220\u9664\u5305\uff0c\u4f46\u4fdd\u7559\u914d\u7f6e\u6587\u4ef6 dpkg -r xxx","title":"7.2.3 dpkg \u5e38\u7528\u547d\u4ee4"},{"location":"chap8.html","text":"\u9644\u5f55 8.1 A40i \u82af\u7247\u7684\u4e0a\u7535\u542f\u52a8\u987a\u5e8f A40i\u82af\u7247\u652f\u6301\u901a\u8fc7 NAND Flash, eMMC,SPI NOR Flash (SPI0), SD card ,USB \u4ecb\u8d28\u542f\u52a8 After power on, the system will try to boot from SDC0, SPI0, eMMC2, SDC2, NAND Flash and USB successively, but if the Boot Select Pin, an external pin that is used to select system boot method, is checked to be in low level state, the system will direclty boot from USB. In normal state, this pin is pulled up by an internal 50kohm resistor \u5f53A40i\u82af\u7247\u4e0a\u7535\u540e\uff0c\u5982\u679c\u68c0\u6d4b\u5230FEL\u5f15\u811a\u4e3a\u4f4e\u7535\u5e73\uff0c\u5219\u82af\u7247\u76f4\u63a5\u8df3\u8f6c\u5230USB FEL\u6a21\u5f0f\uff0c\u7b49\u5f85\u6570\u636e\u901a\u8fc7USB OTG\u4f20\u8f93\uff1b\u5f53FEL\u5f15\u811a\u6ca1\u6709\u88ab\u62c9\u4f4e\u65f6\uff0cBROM\u4f1a\u5c1d\u8bd5\u4eceSDC0, SPI0, eMMC2, SDC2, NAND Flash\uff0cUSB\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u4e14\u5224\u65ad\u8bfb\u53d6\u7684\u6570\u636e\u662f\u5426\u6ee1\u8db3\u4e3a\u5408\u6cd5\u542f\u52a8\u6570\u636e\uff0c\u5982\u679c\u4e3a\u5408\u6cd5\u542f\u52a8\u6570\u636e\uff0c\u5219\u7ed3\u675f\u5f15\u5bfc\uff0c\u5c06\u7cfb\u7edf\u63a7\u5236\u6743\u8f6c\u4ea4\u7ed9bootloader\u3002 \u53c2\u8003\uff1a BROM\u641c\u7d22\u542f\u52a8\u4ecb\u8d28\u987a\u5e8f 8.2 \u5168\u5fd7 USB FEL \u6a21\u5f0f FEL is a low-level subroutine contained in the BootROM on Allwinner devices. It is used for initial programming and recovery of devices using USB. \u5168\u5fd7\u7684FEL\u6a21\u5f0f\u662f\u70e7\u5f55\u56fa\u4ef6\u548c\u89e3\u51b3\u8bbe\u5907\u542f\u52a8\u95ee\u9898\u7684\u4e00\u79cd\u7279\u6b8a\u6a21\u5f0f\u3002FEL\u662f\u70e7\u5f55\u5de5\u5177PhoenixSuit\u4f7f\u7528\u7684\u4e00\u79cd\u534f\u8bae\uff0c\u5b8c\u6574\u540d\u79f0\u4e3aFull-Featured Embedded Loader\u3002 FEL\u6a21\u5f0f\u53ef\u4ee5\u901a\u8fc7USB\u63a5\u53e3\u8fdb\u5165\uff0c\u4ece\u800c\u4f7f\u7528\u70e7\u5f55\u5de5\u5177\u6765\u70e7\u5f55\u6216\u4fee\u590d\u8bbe\u5907\u4e0a\u7684\u56fa\u4ef6\u3002FEL \u56fa\u5316\u5728\u5168\u5fd7BROM\u4e4b\u4e2d\u7684\u901a\u4fe1\u534f\u8bae\uff0c\u7528\u4e8e\u5bf9\u5168\u5fd7\u82af\u7247\u8fdb\u884c\u521d\u59cb\u5316\u548c\u6062\u590d\u3002\u6b64\u65f6\u82af\u7247\u4f5c\u4e3aDEVICE\u8bbe\u5907\u7aef\uff0c\u901a\u8fc7USB OTG \u548cHOST\u7aef\u901a\u8fc7USB FEL\u534f\u8bae\u8fdb\u884c\u901a\u4fe1 \u5728FEL\u6a21\u5f0f\u4e0b\uff0c\u8bbe\u5907\u5904\u4e8e\u4e00\u4e2a\u4f4e\u7ea7\u522b\u72b6\u6001\uff0c\u5176\u4e2d\u53ea\u6709\u57fa\u672c\u9a71\u52a8\u7a0b\u5e8f\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff0c\u4ee5\u4fbf\u901a\u8fc7USB\u63a5\u53e3\u4e0e\u8ba1\u7b97\u673a\u901a\u4fe1\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u70e7\u5f55\u5de5\u5177\u53ef\u4ee5\u4e0e\u8bbe\u5907\u8fdb\u884c\u6570\u636e\u4ea4\u6362\uff0c\u5e76\u5411\u8bbe\u5907\u70e7\u5f55\u65b0\u7684\u56fa\u4ef6\u3002FEL\u6a21\u5f0f\u901a\u5e38\u7528\u4e8e\u4fee\u590d\u8bbe\u5907\u542f\u52a8\u95ee\u9898\uff0c\u4f8b\u5982\u7a7f\u8d8a\u5237\u673a\u9519\u8bef\u3001\u56fa\u4ef6\u635f\u574f\u7b49\u3002\u5728\u8fdb\u5165FEL\u6a21\u5f0f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u70e7\u5f55\u5de5\u5177\u6267\u884c\u4fee\u590d\u64cd\u4f5c\u4ee5\u6062\u590d\u8bbe\u5907\u6b63\u5e38\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u529f\u80fd\u3002 \u603b\u4e4b\uff0c\u5168\u5fd7\u7684FEL\u6a21\u5f0f\u662f\u4e00\u79cd\u975e\u5e38\u6709\u7528\u7684\u5de5\u5177\uff0c\u53ef\u7528\u4e8e\u70e7\u5f55\u548c\u4fee\u590d\u8bbe\u5907\u7684\u56fa\u4ef6\uff0c\u7279\u522b\u662f\u5728\u8bbe\u5907\u65e0\u6cd5\u6b63\u5e38\u542f\u52a8\u65f6\u4f7f\u7528\u3002 \u5728HOST\u7aef\u4e3b\u8981\u901a\u8fc7 sunxi-tools \u5de5\u5177\u96c6\u6765\u8fdb\u884c\u4e0e\u5168\u5fd7\u82af\u7247\u7684\u901a\u4fe1,\u6709\u8bfb\u53d6\u82af\u7247\u4fe1\u606f\uff0c\u6267\u884c\u547d\u4ee4\uff0c\u8bfb\u5199\u5185\u5b58\u7b49\u529f\u80fd\u3002 # sunxi-fel --help sunxi-fel v1.4.1-104-g11a9d20 Usage: sunxi-fel [options] command arguments... [command...] -h, --help Print this usage summary and exit -v, --verbose Verbose logging -p, --progress \"write\" transfers show a progress bar -l, --list Enumerate all (USB) FEL devices and exit -d, --dev bus:devnum Use specific USB bus and device number --sid SID Select device by SID key (exact match) spl file Load and execute U-Boot SPL If file additionally contains a main U-Boot binary (u-boot-sunxi-with-spl.bin), this command also transfers that to memory (default address from image), but won't execute it. uboot file-with-spl like \"spl\", but actually starts U-Boot U-Boot execution will take place when the fel utility exits. This allows combining \"uboot\" with further \"write\" commands (to transfer other files needed for the boot). hex[dump] address length Dumps memory region in hex dump address length Binary memory dump exe[cute] address Call function address reset64 address RMR request for AArch64 warm boot memmove dest source size Copy <size> bytes within device memory readl address Read 32-bit value from device memory writel address value Write 32-bit value to device memory read address length file Write memory contents into file write address file Store file contents into memory write-with-progress addr file \"write\" with progress bar write-with-gauge addr file Output progress for \"dialog --gauge\" write-with-xgauge addr file Extended gauge output (updates prompt) multi[write] # addr file ... \"write-with-progress\" multiple files, sharing a common progress status multi[write]-with-gauge ... like their \"write-with-*\" counterpart, multi[write]-with-xgauge ... but following the 'multi' syntax: <#> addr file [addr file [...]] echo-gauge \"some text\" Update prompt/caption for gauge output ver[sion] Show BROM version sid Retrieve and output 128-bit SID key clear address length Clear memory fill address length value Fill memory spiflash-info Retrieves basic information spiflash-read addr length file Write SPI flash contents into file spiflash-write addr file Store file contents into SPI flash \u53c2\u8003\uff1a \u5168\u5fd7sunxi-tools\u4ecb\u7ecd USB FEL \u6a21\u5f0f 8.3 \u70e7\u5f55 \u70e7\u5f55\u524d\u5c06HMI\u8fdb\u5165\u70e7\u5f55\u6a21\u5f0f\uff0c\u5177\u4f53\u6b65\u9aa4\u4e3a\u77ed\u63a5FEL\u5f15\u811a\uff0c\u7136\u540e\u4e0a\u7535\u5373\u53ef\u8fdb\u5165\u70e7\u5f55\u6a21\u5f0f\uff08\u5373USB FEL\u6a21\u5f0f\uff09 \u5728Ubuntu\u6216\u5176\u4ed6Linux\u53d1\u884c\u7248\u60c5\u51b5\u4e0b\u53ef\u4ee5\u901a\u8fc7libusb\u5e93\u76f4\u63a5\u8fde\u63a5\u8bbe\u5907\u3002 \u5728Windows\u4e0a\u9700\u8981Zadig\u5b89\u88c5WinUSB\u9a71\u52a8\u6765\u5b9e\u73b0\u3002 \u5982\u679c\u662fLinux\u865a\u62df\u673a\uff0c\u5219\u9700\u8981\u5c06USB\u8bbe\u5907\u6302\u8f7d\u5230\u865a\u62df\u673a\u4e0b \u5728Linux \u4e0a\u8f93\u5165lsusb\u53ef\u4ee5\u770b\u5230\u4ee5\u4e0b\u63d0\u793a \u279c ~ lsusb Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub Bus 002 Device 004: ID 1f3a:efe8 Onda (unverified) V972 tablet in flashing mode Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub 1f3a:efe8 \u5373\u4e3a\u5904\u4e8e\u70e7\u5f55\u6a21\u5f0f\u7684HMI\u8bbe\u5907 \u5728 Linux \u73af\u5883\u4e0b\u6267\u884c\u4ee5\u4e0b\u9009\u9879\uff0c\u8fd9\u6837\u70e7\u5f55FEL\u8bbe\u5907\u4e0d\u9700\u8981 sudo \u6743\u9650\u5373\u53ef\u8fd0\u884c sudo touch /etc/udev/rules.d/99-allwinner.rules echo 'SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"1f3a\", ATTRS{idProduct}==\"efe8\", GROUP=\"plugdev\", MODE=\"0660\" SYMLINK+=\"usb-chip\" SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"18d1\", ATTRS{idProduct}==\"1010\", GROUP=\"plugdev\", MODE=\"0660\" SYMLINK+=\"usb-chip-fastboot\" SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"18d1\", ATTRS{idProduct}==\"4d00\", GROUP=\"plugdev\", MODE=\"0660\" SYMLINK+=\"usb-chip-fastboot\" SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"1f3a\", ATTRS{idProduct}==\"1010\", GROUP=\"plugdev\", MODE=\"0660\" SYMLINK+=\"usb-chip-fastboot\" SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"067b\", ATTRS{idProduct}==\"2303\", GROUP=\"plugdev\", MODE=\"0660\" SYMLINK+=\"usb-serial-adapter\"' | sudo tee /etc/udev/rules.d/99-allwinner.rules sudo udevadm control --reload-rules \u5728Buildroot\u6267\u884cmake\u540e\uff0c\u4f1a\u5728output/images\u76ee\u5f55\u751f\u6210image.zip,\u89e3\u538bimage.zip \u540e\u53ef\u4ee5\u770b\u5230\u8be5\u538b\u7f29\u5305\u91cc\u9762\u6709\u4ee5\u4e0b\u6587\u4ef6 . \u251c\u2500\u2500 rootfs.ubi //\u6839\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf \u251c\u2500\u2500 sun8i-a40i-cotrust-g101.dtb //\u8bbe\u5907\u6811\u6587\u4ef6 \u251c\u2500\u2500 sunxi-spl-with-ecc.bin //bootloader spl \u251c\u2500\u2500 u-boot-dtb.img //bootloader \u251c\u2500\u2500 u-boot-fastboot.bin //\u5e26\u6709fastboot \u7528\u4e8e\u70e7\u5f55\u7684uboot\u56fa\u4ef6 \u2514\u2500\u2500 zImage //linux kernel\u6587\u4ef6 \u5982\u679c\u8981\u70e7\u5f55\u56fa\u4ef6\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 sudo sunxi-fel uboot u-boot-fastboot.bin; fastboot flash spl sunxi-spl-with-ecc.bin; fastboot flash bootloader u-boot-dtb.img; fastboot flash kernel zImage; fastboot flash dtb *.dtb; fastboot flash filesystem rootfs.ubi; fastboot reboot \u5206\u533a\u5927\u5c0f\u548c\u5404\u5206\u533a\u7684\u4f5c\u7528\u53ef\u4ee5\u53c2\u8003\u7b2c\u56db\u7ae0 U-Boot \u7b2c\u56db\u8282 U-Boot\u5206\u533a \u53c2\u8003\u94fe\u63a5 fastboot\u5b98\u65b9\u6587\u6863 fastboot\u539f\u7406\u89e3\u6790","title":"8. \u9644\u5f55"},{"location":"chap8.html#_1","text":"","title":"\u9644\u5f55"},{"location":"chap8.html#81-a40i","text":"A40i\u82af\u7247\u652f\u6301\u901a\u8fc7 NAND Flash, eMMC,SPI NOR Flash (SPI0), SD card ,USB \u4ecb\u8d28\u542f\u52a8 After power on, the system will try to boot from SDC0, SPI0, eMMC2, SDC2, NAND Flash and USB successively, but if the Boot Select Pin, an external pin that is used to select system boot method, is checked to be in low level state, the system will direclty boot from USB. In normal state, this pin is pulled up by an internal 50kohm resistor \u5f53A40i\u82af\u7247\u4e0a\u7535\u540e\uff0c\u5982\u679c\u68c0\u6d4b\u5230FEL\u5f15\u811a\u4e3a\u4f4e\u7535\u5e73\uff0c\u5219\u82af\u7247\u76f4\u63a5\u8df3\u8f6c\u5230USB FEL\u6a21\u5f0f\uff0c\u7b49\u5f85\u6570\u636e\u901a\u8fc7USB OTG\u4f20\u8f93\uff1b\u5f53FEL\u5f15\u811a\u6ca1\u6709\u88ab\u62c9\u4f4e\u65f6\uff0cBROM\u4f1a\u5c1d\u8bd5\u4eceSDC0, SPI0, eMMC2, SDC2, NAND Flash\uff0cUSB\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u4e14\u5224\u65ad\u8bfb\u53d6\u7684\u6570\u636e\u662f\u5426\u6ee1\u8db3\u4e3a\u5408\u6cd5\u542f\u52a8\u6570\u636e\uff0c\u5982\u679c\u4e3a\u5408\u6cd5\u542f\u52a8\u6570\u636e\uff0c\u5219\u7ed3\u675f\u5f15\u5bfc\uff0c\u5c06\u7cfb\u7edf\u63a7\u5236\u6743\u8f6c\u4ea4\u7ed9bootloader\u3002 \u53c2\u8003\uff1a BROM\u641c\u7d22\u542f\u52a8\u4ecb\u8d28\u987a\u5e8f","title":"8.1 A40i \u82af\u7247\u7684\u4e0a\u7535\u542f\u52a8\u987a\u5e8f"},{"location":"chap8.html#82-usb-fel","text":"FEL is a low-level subroutine contained in the BootROM on Allwinner devices. It is used for initial programming and recovery of devices using USB. \u5168\u5fd7\u7684FEL\u6a21\u5f0f\u662f\u70e7\u5f55\u56fa\u4ef6\u548c\u89e3\u51b3\u8bbe\u5907\u542f\u52a8\u95ee\u9898\u7684\u4e00\u79cd\u7279\u6b8a\u6a21\u5f0f\u3002FEL\u662f\u70e7\u5f55\u5de5\u5177PhoenixSuit\u4f7f\u7528\u7684\u4e00\u79cd\u534f\u8bae\uff0c\u5b8c\u6574\u540d\u79f0\u4e3aFull-Featured Embedded Loader\u3002 FEL\u6a21\u5f0f\u53ef\u4ee5\u901a\u8fc7USB\u63a5\u53e3\u8fdb\u5165\uff0c\u4ece\u800c\u4f7f\u7528\u70e7\u5f55\u5de5\u5177\u6765\u70e7\u5f55\u6216\u4fee\u590d\u8bbe\u5907\u4e0a\u7684\u56fa\u4ef6\u3002FEL \u56fa\u5316\u5728\u5168\u5fd7BROM\u4e4b\u4e2d\u7684\u901a\u4fe1\u534f\u8bae\uff0c\u7528\u4e8e\u5bf9\u5168\u5fd7\u82af\u7247\u8fdb\u884c\u521d\u59cb\u5316\u548c\u6062\u590d\u3002\u6b64\u65f6\u82af\u7247\u4f5c\u4e3aDEVICE\u8bbe\u5907\u7aef\uff0c\u901a\u8fc7USB OTG \u548cHOST\u7aef\u901a\u8fc7USB FEL\u534f\u8bae\u8fdb\u884c\u901a\u4fe1 \u5728FEL\u6a21\u5f0f\u4e0b\uff0c\u8bbe\u5907\u5904\u4e8e\u4e00\u4e2a\u4f4e\u7ea7\u522b\u72b6\u6001\uff0c\u5176\u4e2d\u53ea\u6709\u57fa\u672c\u9a71\u52a8\u7a0b\u5e8f\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff0c\u4ee5\u4fbf\u901a\u8fc7USB\u63a5\u53e3\u4e0e\u8ba1\u7b97\u673a\u901a\u4fe1\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u70e7\u5f55\u5de5\u5177\u53ef\u4ee5\u4e0e\u8bbe\u5907\u8fdb\u884c\u6570\u636e\u4ea4\u6362\uff0c\u5e76\u5411\u8bbe\u5907\u70e7\u5f55\u65b0\u7684\u56fa\u4ef6\u3002FEL\u6a21\u5f0f\u901a\u5e38\u7528\u4e8e\u4fee\u590d\u8bbe\u5907\u542f\u52a8\u95ee\u9898\uff0c\u4f8b\u5982\u7a7f\u8d8a\u5237\u673a\u9519\u8bef\u3001\u56fa\u4ef6\u635f\u574f\u7b49\u3002\u5728\u8fdb\u5165FEL\u6a21\u5f0f\u540e\uff0c\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u70e7\u5f55\u5de5\u5177\u6267\u884c\u4fee\u590d\u64cd\u4f5c\u4ee5\u6062\u590d\u8bbe\u5907\u6b63\u5e38\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u529f\u80fd\u3002 \u603b\u4e4b\uff0c\u5168\u5fd7\u7684FEL\u6a21\u5f0f\u662f\u4e00\u79cd\u975e\u5e38\u6709\u7528\u7684\u5de5\u5177\uff0c\u53ef\u7528\u4e8e\u70e7\u5f55\u548c\u4fee\u590d\u8bbe\u5907\u7684\u56fa\u4ef6\uff0c\u7279\u522b\u662f\u5728\u8bbe\u5907\u65e0\u6cd5\u6b63\u5e38\u542f\u52a8\u65f6\u4f7f\u7528\u3002 \u5728HOST\u7aef\u4e3b\u8981\u901a\u8fc7 sunxi-tools \u5de5\u5177\u96c6\u6765\u8fdb\u884c\u4e0e\u5168\u5fd7\u82af\u7247\u7684\u901a\u4fe1,\u6709\u8bfb\u53d6\u82af\u7247\u4fe1\u606f\uff0c\u6267\u884c\u547d\u4ee4\uff0c\u8bfb\u5199\u5185\u5b58\u7b49\u529f\u80fd\u3002 # sunxi-fel --help sunxi-fel v1.4.1-104-g11a9d20 Usage: sunxi-fel [options] command arguments... [command...] -h, --help Print this usage summary and exit -v, --verbose Verbose logging -p, --progress \"write\" transfers show a progress bar -l, --list Enumerate all (USB) FEL devices and exit -d, --dev bus:devnum Use specific USB bus and device number --sid SID Select device by SID key (exact match) spl file Load and execute U-Boot SPL If file additionally contains a main U-Boot binary (u-boot-sunxi-with-spl.bin), this command also transfers that to memory (default address from image), but won't execute it. uboot file-with-spl like \"spl\", but actually starts U-Boot U-Boot execution will take place when the fel utility exits. This allows combining \"uboot\" with further \"write\" commands (to transfer other files needed for the boot). hex[dump] address length Dumps memory region in hex dump address length Binary memory dump exe[cute] address Call function address reset64 address RMR request for AArch64 warm boot memmove dest source size Copy <size> bytes within device memory readl address Read 32-bit value from device memory writel address value Write 32-bit value to device memory read address length file Write memory contents into file write address file Store file contents into memory write-with-progress addr file \"write\" with progress bar write-with-gauge addr file Output progress for \"dialog --gauge\" write-with-xgauge addr file Extended gauge output (updates prompt) multi[write] # addr file ... \"write-with-progress\" multiple files, sharing a common progress status multi[write]-with-gauge ... like their \"write-with-*\" counterpart, multi[write]-with-xgauge ... but following the 'multi' syntax: <#> addr file [addr file [...]] echo-gauge \"some text\" Update prompt/caption for gauge output ver[sion] Show BROM version sid Retrieve and output 128-bit SID key clear address length Clear memory fill address length value Fill memory spiflash-info Retrieves basic information spiflash-read addr length file Write SPI flash contents into file spiflash-write addr file Store file contents into SPI flash \u53c2\u8003\uff1a \u5168\u5fd7sunxi-tools\u4ecb\u7ecd USB FEL \u6a21\u5f0f","title":"8.2 \u5168\u5fd7 USB FEL \u6a21\u5f0f"},{"location":"chap8.html#83","text":"\u70e7\u5f55\u524d\u5c06HMI\u8fdb\u5165\u70e7\u5f55\u6a21\u5f0f\uff0c\u5177\u4f53\u6b65\u9aa4\u4e3a\u77ed\u63a5FEL\u5f15\u811a\uff0c\u7136\u540e\u4e0a\u7535\u5373\u53ef\u8fdb\u5165\u70e7\u5f55\u6a21\u5f0f\uff08\u5373USB FEL\u6a21\u5f0f\uff09 \u5728Ubuntu\u6216\u5176\u4ed6Linux\u53d1\u884c\u7248\u60c5\u51b5\u4e0b\u53ef\u4ee5\u901a\u8fc7libusb\u5e93\u76f4\u63a5\u8fde\u63a5\u8bbe\u5907\u3002 \u5728Windows\u4e0a\u9700\u8981Zadig\u5b89\u88c5WinUSB\u9a71\u52a8\u6765\u5b9e\u73b0\u3002 \u5982\u679c\u662fLinux\u865a\u62df\u673a\uff0c\u5219\u9700\u8981\u5c06USB\u8bbe\u5907\u6302\u8f7d\u5230\u865a\u62df\u673a\u4e0b \u5728Linux \u4e0a\u8f93\u5165lsusb\u53ef\u4ee5\u770b\u5230\u4ee5\u4e0b\u63d0\u793a \u279c ~ lsusb Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub Bus 002 Device 004: ID 1f3a:efe8 Onda (unverified) V972 tablet in flashing mode Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub 1f3a:efe8 \u5373\u4e3a\u5904\u4e8e\u70e7\u5f55\u6a21\u5f0f\u7684HMI\u8bbe\u5907 \u5728 Linux \u73af\u5883\u4e0b\u6267\u884c\u4ee5\u4e0b\u9009\u9879\uff0c\u8fd9\u6837\u70e7\u5f55FEL\u8bbe\u5907\u4e0d\u9700\u8981 sudo \u6743\u9650\u5373\u53ef\u8fd0\u884c sudo touch /etc/udev/rules.d/99-allwinner.rules echo 'SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"1f3a\", ATTRS{idProduct}==\"efe8\", GROUP=\"plugdev\", MODE=\"0660\" SYMLINK+=\"usb-chip\" SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"18d1\", ATTRS{idProduct}==\"1010\", GROUP=\"plugdev\", MODE=\"0660\" SYMLINK+=\"usb-chip-fastboot\" SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"18d1\", ATTRS{idProduct}==\"4d00\", GROUP=\"plugdev\", MODE=\"0660\" SYMLINK+=\"usb-chip-fastboot\" SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"1f3a\", ATTRS{idProduct}==\"1010\", GROUP=\"plugdev\", MODE=\"0660\" SYMLINK+=\"usb-chip-fastboot\" SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"067b\", ATTRS{idProduct}==\"2303\", GROUP=\"plugdev\", MODE=\"0660\" SYMLINK+=\"usb-serial-adapter\"' | sudo tee /etc/udev/rules.d/99-allwinner.rules sudo udevadm control --reload-rules \u5728Buildroot\u6267\u884cmake\u540e\uff0c\u4f1a\u5728output/images\u76ee\u5f55\u751f\u6210image.zip,\u89e3\u538bimage.zip \u540e\u53ef\u4ee5\u770b\u5230\u8be5\u538b\u7f29\u5305\u91cc\u9762\u6709\u4ee5\u4e0b\u6587\u4ef6 . \u251c\u2500\u2500 rootfs.ubi //\u6839\u6587\u4ef6\u7cfb\u7edf\u955c\u50cf \u251c\u2500\u2500 sun8i-a40i-cotrust-g101.dtb //\u8bbe\u5907\u6811\u6587\u4ef6 \u251c\u2500\u2500 sunxi-spl-with-ecc.bin //bootloader spl \u251c\u2500\u2500 u-boot-dtb.img //bootloader \u251c\u2500\u2500 u-boot-fastboot.bin //\u5e26\u6709fastboot \u7528\u4e8e\u70e7\u5f55\u7684uboot\u56fa\u4ef6 \u2514\u2500\u2500 zImage //linux kernel\u6587\u4ef6 \u5982\u679c\u8981\u70e7\u5f55\u56fa\u4ef6\uff0c\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 sudo sunxi-fel uboot u-boot-fastboot.bin; fastboot flash spl sunxi-spl-with-ecc.bin; fastboot flash bootloader u-boot-dtb.img; fastboot flash kernel zImage; fastboot flash dtb *.dtb; fastboot flash filesystem rootfs.ubi; fastboot reboot \u5206\u533a\u5927\u5c0f\u548c\u5404\u5206\u533a\u7684\u4f5c\u7528\u53ef\u4ee5\u53c2\u8003\u7b2c\u56db\u7ae0 U-Boot \u7b2c\u56db\u8282 U-Boot\u5206\u533a \u53c2\u8003\u94fe\u63a5 fastboot\u5b98\u65b9\u6587\u6863 fastboot\u539f\u7406\u89e3\u6790","title":"8.3 \u70e7\u5f55"}]}